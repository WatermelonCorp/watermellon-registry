{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "video-player03",
  "dependencies": [
    "lucide-react",
    "motion"
  ],
  "files": [
    {
      "path": "src/components/ui/video-player03.tsx",
      "content": "import React, { useState, useRef, useEffect, useCallback, useMemo } from 'react';\nimport {\n    Play,\n    Pause,\n    Volume2,\n    VolumeX,\n    Maximize,\n    Minimize,\n    PictureInPicture2,\n    Settings,\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'motion/react';\n\n/**\n * UTILITIES\n */\nconst formatTime = (seconds: number): string => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs < 10 ? '0' : ''}${secs}`;\n};\n\n/**\n * PROPS\n */\nexport interface VideoPlayer03Props {\n    src: string;\n    poster?: string;\n    autoPlay?: boolean;\n    loop?: boolean;\n    className?: string;\n    onPlay?: () => void;\n    onPause?: () => void;\n}\n\nexport const VideoPlayer03: React.FC<VideoPlayer03Props> = ({\n    src,\n    poster,\n    autoPlay = false,\n    loop = false,\n    className = '',\n    onPlay,\n    onPause,\n}) => {\n    const videoRef = useRef<HTMLVideoElement>(null);\n    const containerRef = useRef<HTMLDivElement>(null);\n    const seekRef = useRef<HTMLDivElement>(null);\n\n    const [isPlaying, setIsPlaying] = useState(false);\n    const [currentTime, setCurrentTime] = useState(0);\n    const [duration, setDuration] = useState(0);\n    const [volume, setVolume] = useState(1);\n    const [isMuted, setIsMuted] = useState(false);\n    const [isFullscreen, setIsFullscreen] = useState(false);\n    const [isHovering, setIsHovering] = useState(true);\n    const [showVolumeSlider, setShowVolumeSlider] = useState(false);\n    const [isScrubbing, setIsScrubbing] = useState(false);\n\n    const [hoverTime, setHoverTime] = useState<number | null>(null);\n    const [hoverX, setHoverX] = useState(0);\n\n    const hideTimerRef = useRef<number | null>(null);\n\n    const togglePlay = useCallback(() => {\n        if (!videoRef.current) return;\n\n        if (isPlaying) {\n            videoRef.current.pause();\n            onPause?.();\n        } else {\n            videoRef.current.play();\n            onPlay?.();\n        }\n\n        setIsPlaying(!isPlaying);\n    }, [isPlaying, onPlay, onPause]);\n\n    const onTimeUpdate = () => {\n        if (videoRef.current && !isScrubbing) {\n            setCurrentTime(videoRef.current.currentTime);\n        }\n    };\n\n    const onLoadedMetadata = () => {\n        if (videoRef.current) {\n            setDuration(videoRef.current.duration);\n        }\n    };\n\n    const onVolumeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const val = parseFloat(e.target.value);\n        setVolume(val);\n        if (videoRef.current) {\n            videoRef.current.volume = val;\n            setIsMuted(val === 0);\n        }\n    };\n\n    const toggleMute = () => {\n        if (!videoRef.current) return;\n        const newMuted = !isMuted;\n        setIsMuted(newMuted);\n        videoRef.current.muted = newMuted;\n    };\n\n    const toggleFullscreen = () => {\n        if (!isFullscreen) {\n            containerRef.current?.requestFullscreen();\n        } else {\n            document.exitFullscreen();\n        }\n        setIsFullscreen(!isFullscreen);\n    };\n\n    const togglePiP = async () => {\n        if (document.pictureInPictureElement) {\n            await document.exitPictureInPicture();\n        } else if (videoRef.current) {\n            await videoRef.current.requestPictureInPicture();\n        }\n    };\n\n    const handleScrub = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const val = parseFloat(e.target.value);\n        setCurrentTime(val);\n        if (videoRef.current) {\n            videoRef.current.currentTime = val;\n        }\n    };\n\n    const handleSeekHover = (e: React.MouseEvent<HTMLDivElement>) => {\n        if (!seekRef.current || !duration) return;\n        const rect = seekRef.current.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const percent = Math.min(Math.max(x / rect.width, 0), 1);\n        setHoverX(x);\n        setHoverTime(percent * duration);\n    };\n\n    const handleMouseMove = () => {\n        setIsHovering(true);\n        if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n        hideTimerRef.current = window.setTimeout(() => {\n            if (isPlaying) setIsHovering(false);\n        }, 3000);\n    };\n\n    useEffect(() => {\n        const onFsChange = () => setIsFullscreen(!!document.fullscreenElement);\n        document.addEventListener('fullscreenchange', onFsChange);\n        return () => document.removeEventListener('fullscreenchange', onFsChange);\n    }, []);\n\n    const progressPercent = useMemo(() => {\n        return duration ? (currentTime / duration) * 100 : 0;\n    }, [currentTime, duration]);\n\n    return (\n        <div\n            ref={containerRef}\n            onMouseMove={handleMouseMove}\n            onMouseLeave={() => isPlaying && setIsHovering(false)}\n            className={`relative w-full max-w-6xl h-[90vh] aspect-video bg-black rounded-3xl overflow-hidden shadow-2xl group flex items-center justify-center border border-black/5 ${className}`}\n        >\n            <video\n                ref={videoRef}\n                className=\"w-full h-full object-cover cursor-pointer\"\n                src={src}\n                poster={poster}\n                autoPlay={autoPlay}\n                loop={loop}\n                onClick={togglePlay}\n                onTimeUpdate={onTimeUpdate}\n                onLoadedMetadata={onLoadedMetadata}\n            />\n\n            <AnimatePresence>\n                {!isPlaying && (\n                    <motion.div className=\"absolute inset-0 flex items-center justify-center z-10 pointer-events-none\">\n                        <div className=\"bg-white/10 backdrop-blur-md rounded-full p-8 border border-white/20\">\n                            <Play className=\"w-12 h-12 text-white fill-white ml-1\" />\n                        </div>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n\n            <AnimatePresence>\n                {isHovering && (\n                    <motion.div className=\"absolute bottom-6   w-[90%] bg-[#121212]/80 backdrop-blur-2xl border border-black/5 rounded-2xl p-4 flex flex-col gap-3 z-50 shadow-2xl\">\n\n                        {/* PROGRESS */}\n                        <div\n                            ref={seekRef}\n                            onMouseMove={handleSeekHover}\n                            onMouseLeave={() => setHoverTime(null)}\n                            className=\"relative w-full\"\n                        >\n                            <input title='timestamp'\n                                type=\"range\"\n                                min={0}\n                                max={duration}\n                                step={0.1}\n                                value={currentTime}\n                                onChange={handleScrub}\n                                onMouseDown={() => setIsScrubbing(true)}\n                                onMouseUp={() => setIsScrubbing(false)}\n                                className=\"absolute inset-0 w-full h-1.5 opacity-0 cursor-pointer z-10\"\n                            />\n\n                            <div className=\"h-1.5 w-full bg-white/10 rounded-full overflow-hidden relative\">\n                                <motion.div\n                                    className=\"h-full bg-white absolute top-0 left-0 rounded-full\"\n                                    style={{ width: `${progressPercent}%` }}\n                                />\n                            </div>\n\n                            <div\n                                className=\"absolute top-1/2 -translate-y-1/2 w-0.5 h-4 bg-white pointer-events-none\"\n                                style={{ left: `${progressPercent}%` }}\n                            />\n                            {hoverTime !== null && (\n                                <div\n                                    className=\"absolute -top-12 text-xs text-white/90 pointer-events-none\"\n                                    style={{ left: hoverX, transform: 'translateX(-50%)' }}\n                                >\n                                    {formatTime(hoverTime)} / {formatTime(duration)}\n                                </div>\n                            )}\n                        </div>\n\n                        {/* CONTROLS */}\n                        <div className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center gap-4\">\n                                <button onClick={togglePlay} className=\"hover:bg-white/10 p-2 rounded-lg\">\n                                    {isPlaying ? <Pause className=\"w-5 h-5 text-white\" /> : <Play className=\"w-5 h-5 text-white\" />}\n                                </button>\n\n                                {/* VOLUME */}\n                                <div\n                                    className=\"flex items-center gap-1 relative\"\n                                    onMouseEnter={() => setShowVolumeSlider(true)}\n                                    onMouseLeave={() => setShowVolumeSlider(false)}\n                                >\n                                    <button onClick={toggleMute} className=\"hover:bg-white/10 p-2 text-white rounded-lg\">\n                                        {isMuted ? <VolumeX /> : <Volume2 />}\n                                    </button>\n\n                                    <AnimatePresence>\n                                        {showVolumeSlider && (\n                                            <motion.input\n                                                type=\"range\"\n                                                min={0}\n                                                max={1}\n                                                step={0.01}\n                                                value={volume}\n                                                onChange={onVolumeChange}\n                                                className=\"w-20 h-1 accent-white\"\n                                            />\n                                        )}\n                                    </AnimatePresence>\n                                </div>\n\n                                <div className=\"text-xs text-white/60\">\n                                    <span className=\"text-white\">{formatTime(currentTime)}</span> / {formatTime(duration)}\n                                </div>\n                            </div>\n\n                            <div className=\"flex items-center gap-2\">\n                                <button title='settings' className=\"hover:bg-white/10 p-2 rounded-lg text-white/70\">\n                                    <Settings />\n                                </button>\n                                <button title='pictureInpicture' onClick={togglePiP} className=\"hover:bg-white/10 p-2 rounded-lg text-white/70\">\n                                    <PictureInPicture2 />\n                                </button>\n                                <button onClick={toggleFullscreen} className=\"hover:bg-white/10 p-2 rounded-lg text-white/70\">\n                                    {isFullscreen ? <Minimize /> : <Maximize />}\n                                </button>\n                            </div>\n                        </div>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n        </div>\n    );\n};\n",
      "type": "registry:ui",
      "target": "components/ui/video-player03.tsx"
    }
  ],
  "type": "registry:ui"
}