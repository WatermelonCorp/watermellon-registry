{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "compose-email-card",
  "dependencies": [
    "lucide-react",
    "motion"
  ],
  "files": [
    {
      "path": "src/components/ui/compose-email-card.tsx",
      "content": "import React, { useState, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n    X, Minus, Maximize2, Mail, ChevronDown,\n    Smile, Paperclip, Link2, Sparkles,\n    MoreHorizontal, Bold, Italic, Underline,\n    Calendar, Command,\n    Moon, Sun\n} from 'lucide-react';\nimport { LuSend } from 'react-icons/lu';\n\nexport interface Attachment {\n    id: string;\n    name: string;\n    type: string;\n    size: string;\n    icon: 'PDF' | 'IMAGE' | 'DOC';\n}\n\nexport interface Recipient {\n    id: string;\n    name: string;\n    avatar: string;\n    email: string;\n}\n\nexport interface EmailData {\n    from: Recipient;\n    to: Recipient[];\n    subject: string;\n    body: string;\n    attachments: Attachment[];\n}\n\ninterface ComposeEmailCardProps {\n    data: EmailData;\n    onSend?: (data: EmailData) => void;\n    onClose?: () => void;\n}\n\nexport const ComposeEmailCard: React.FC<ComposeEmailCardProps> = ({ data, onSend, onClose }) => {\n    const [showToolbar, setShowToolbar] = useState(false);\n    const [toolbarPos, setToolbarPos] = useState({ x: 0, y: 0 });\n    const bodyRef = useRef<HTMLDivElement>(null);\n    const [theme, setTheme] = useState<'light' | 'dark'>('light');\n    const toolbarRef = useRef<HTMLDivElement>(null);\n\n    const springConfig = { type: \"spring\", stiffness: 450, damping: 32, mass: 1 } as const;\n\n    const handleSelection = () => {\n        const selection = window.getSelection();\n        if (selection && selection.toString().length > 0 && bodyRef.current) {\n            const range = selection.getRangeAt(0);\n            const rect = range.getBoundingClientRect();\n            const parentRect = bodyRef.current.getBoundingClientRect();\n\n            setToolbarPos({\n                x: rect.left + rect.width / 2 - parentRect.left,\n                y: rect.top - parentRect.top - 60\n            });\n            setShowToolbar(true);\n        } else {\n            setShowToolbar(false);\n        }\n    };\n\n    const getSafeToolbarX = (rawX: number) => {\n        if (!toolbarRef.current || !bodyRef.current) return rawX;\n\n        const toolbarWidth = toolbarRef.current.offsetWidth;\n        const containerWidth = bodyRef.current.offsetWidth;\n\n        const padding = 12;\n\n        const minX = padding;\n        const maxX = containerWidth - toolbarWidth - padding;\n\n        return Math.min(Math.max(rawX - toolbarWidth / 2, minX), maxX);\n    };\n\n\n    return (\n        <div\n            className=\"transition-all duration-500 min-h-screen w-full flex flex-col items-center justify-center p-10 relative overflow-hidden\"\n            style={{\n                filter: theme === 'dark' ? 'invert(0.9) hue-rotate(180deg)' : 'none',\n                backgroundColor: theme === 'dark' ? '#000' : 'transparent'\n            }}\n        >\n            {/* Background Pattern */}\n            <div className=\"fixed inset-0 pointer-events-none z-[-1] bg-[#FBFBFC] overflow-hidden\">\n                <div\n                    className=\"absolute inset-0 opacity-[0.4]\"\n                    style={{\n                        backgroundImage: `repeating-linear-gradient(\n              -45deg,\n              #E5E7EB 0px,\n              #E5E7EB 1px,\n              transparent 1px,\n              transparent 10px\n            )`\n                    }}\n                />\n\n                <div\n                    className=\"absolute inset-0\"\n                    style={{\n                        backgroundImage: `linear-gradient(to right, #D1D5DB 1px, transparent 1px)`,\n                        backgroundSize: '240px 100%',\n                        maskImage: 'linear-gradient(to bottom, black 5px, transparent 5px)',\n                        WebkitMaskImage: 'linear-gradient(to bottom, black 5px, transparent 5px)',\n                        maskSize: '100% 10px',\n                        WebkitMaskSize: '100% 10px'\n                    }}\n                />\n\n                <div\n                    className=\"absolute inset-0\"\n                    style={{\n                        backgroundImage: `linear-gradient(to bottom, #D1D5DB 1px, transparent 1px)`,\n                        backgroundSize: '100% 180px',\n                        maskImage: 'linear-gradient(to right, black 5px, transparent 5px)',\n                        WebkitMaskImage: 'linear-gradient(to right, black 5px, transparent 5px)',\n                        maskSize: '10px 100%',\n                        WebkitMaskSize: '10px 100%'\n                    }}\n                />\n            </div>\n\n            {/* Theme Toggle */}\n            <button\n                onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}\n                className=\"absolute top-10 right-10 p-2 rounded-full border border-gray-300 bg-white shadow-sm z-50\"\n                style={{ filter: theme === 'dark' ? 'invert(1) hue-rotate(180deg)' : 'none' }}\n            >\n                {theme === 'light' ? <Moon size={20} /> : <Sun size={20} />}\n            </button>\n\n            <motion.div\n                initial={{ opacity: 0, y: 40, scale: 0.98 }}\n                animate={{ opacity: 1, y: 0, scale: 1 }}\n                transition={{ ...springConfig, damping: 38 }}\n                className=\"w-full max-w-[580px] max-h-[92vh] bg-[#F5F5F7] rounded-[24px] shadow-lg border border-gray-200/60 flex flex-col text-[#374151] antialiased overflow-hidden z-10\"\n            >\n                {/* Header */}\n                <div className=\"flex-none flex items-center justify-between pl-5 pr-4 py-4 bg-[#F5F5F7]\">\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 bg-[#6B5FF5] rounded-[8px] flex items-center justify-center text-white\">\n                            <Mail size={22} strokeWidth={1.5} />\n                        </div>\n                        <span className=\"font-semibold text-[15px] tracking-tight text-[#29292B]\">Compose email</span>\n                    </div>\n                    <div className=\"flex items-center gap-0.5\">\n                        <button title='minimize' className=\"p-2 rounded-lg text-gray-400 hover:text-black/70 duration-200   transition-colors\"><Minus size={18} /></button>\n                        <button title='Maximize' className=\"p-2 rounded-lg text-gray-400 hover:text-black/70 duration-200  transition-colors\"><Maximize2 size={15} /></button>\n                        <button title='close' onClick={onClose} className=\"p-2 hover:text-black/70 rounded-lg text-gray-400 transition-colors duration-200\"><X size={18} /></button>\n                    </div>\n                </div>\n\n                {/* Scrollable Body */}\n                <div className=\"flex-1 overflow-y-auto custom-scrollbar bg-white border border-[#E5E5E5] rounded-[20px] \">\n                    {/* Metadata Section */}\n                    <div className=\"px-8 pt-6 pb-2 space-y-2\">\n                        <div className=\"flex items-center text-[13px]\">\n                            <span className=\"w-14 text-gray-400\">From</span>\n                            <div className=\"flex items-center gap-2 bg-white px-2.5 py-1 rounded-full border border-gray-200 hover:border-gray-300 transition-all cursor-pointer shadow-sm\">\n                                <img src={data.from.avatar} alt=\"\" className=\"w-5 h-5 rounded-full object-cover\" />\n                                <span className=\"text-gray-700 font-medium\">{data.from.name}</span>\n                                <ChevronDown size={14} className=\"text-gray-400\" />\n                            </div>\n                        </div>\n\n                        <div className=\"flex items-start text-[13px] border-b border-gray-100  py-2\">\n                            <span className=\"w-14 text-gray-400 mt-2\">To</span>\n                            <div className=\"flex flex-wrap gap-2 flex-1\">\n                                {data.to.map((recipient) => (\n                                    <div key={recipient.id} className=\"flex items-center gap-2 bg-white px-2.5 py-1 rounded-full border border-gray-200 shadow-sm\">\n                                        <img src={recipient.avatar} alt=\"\" className=\"w-5 h-5 rounded-full object-cover\" />\n                                        <span className=\"text-gray-700 font-medium\">{recipient.name}</span>\n                                    </div>\n                                ))}\n                            </div>\n                            <div className=\"flex gap-3 ml-4 font-medium text-gray-400 text-[11px] mt-2.5\">\n                                <button className=\"hover:text-[#6366F1] transition-colors\">CC</button>\n                                <button className=\"hover:text-[#6366F1] transition-colors\">BCC</button>\n                            </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-4 py-2 border-b border-gray-100\">\n                            <span className=\"text-gray-400 text-[13px] w-14\">Subject</span>\n                            <input title='subject' type=\"text\" defaultValue={data.subject} className=\"flex-1 font-medium text-gray-800 text-[15px] outline-none bg-transparent\" />\n                        </div>\n                    </div>\n\n                    {/* Composition Area */}\n                    <div className=\"relative px-8 py-2 min-h-[200px]\">\n                        <AnimatePresence>\n                            {showToolbar && (\n                                <motion.div\n                                    ref={toolbarRef}\n                                    initial={{ opacity: 0, y: 10, scale: 0.95 }}\n                                    animate={{\n                                        opacity: 1,\n                                        y: 0,\n                                        scale: 1,\n                                        left: getSafeToolbarX(toolbarPos.x),\n                                    }}\n                                    exit={{ opacity: 0, scale: 0.95 }}\n                                    transition={springConfig}\n                                    className=\"absolute flex items-center gap-1 bg-white shadow-[0_10px_30px_rgba(0,0,0,0.12)] border border-gray-200 rounded-xl p-1.5 z-[60]\"\n                                    style={{ top: toolbarPos.y }}\n                                >\n                                    <button className=\"flex items-center gap-2 px-3 py-1.5 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors\">\n                                        <Sparkles size={14} className=\"text-[#6366F1]\" />\n                                        <span className=\"text-[13px] font-semibold text-gray-700\">Ask for changes</span>\n                                        <div className=\"flex items-center gap-0.5 ml-1 text-gray-400\">\n                                            <Command size={10} /> <span className=\"text-[10px] font-bold\">K</span>\n                                        </div>\n                                    </button>\n                                    <div className=\"w-[1px] h-4 bg-gray-200 mx-1\" />\n                                    <button className=\"flex items-center gap-1 px-2 py-1.5 hover:bg-gray-50 rounded-lg text-[13px] font-medium text-gray-600\">Text <ChevronDown size={14} /></button>\n                                    <div className=\"flex items-center px-1 text-gray-500\">\n                                        <button title='bold' className=\"p-2 hover:bg-gray-50 rounded-lg\"><Bold size={16} /></button>\n                                        <button title='italic' className=\"p-2 hover:bg-gray-50 rounded-lg\"><Italic size={16} /></button>\n                                        <button title='underline' className=\"p-2 hover:bg-gray-50 rounded-lg\"><Underline size={16} /></button>\n                                        <button title='link' className=\"p-2 hover:bg-gray-50 rounded-lg\"><Link2 size={16} /></button>\n                                    </div>\n                                </motion.div>\n                            )}\n                        </AnimatePresence>\n\n                        <div\n                            ref={bodyRef}\n                            contentEditable\n                            onMouseUp={handleSelection}\n                            onKeyUp={handleSelection}\n                            className=\"outline-none text-[15px] leading-relaxed text-gray-700 whitespace-pre-wrap min-h-[170px]\"\n                            dangerouslySetInnerHTML={{ __html: data.body }}\n                        />\n\n                        {/* Attachments Section */}\n                        <div className=\"mt-8\">\n                            <h4 className=\"text-[12px] font-medium text-[#A7A7A9] capitalize tracking-widest mb-4\">Attachments</h4>\n                            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\n                                {data.attachments.map((file) => (\n                                    <motion.div key={file.id} whileHover={{ y: -2 }} className=\"group flex items-center gap-3.5 p-2 bg-white border-[1.7px] border-[#F1F2F8] rounded-[14px] hover:border-[#6366F1]/30 hover:shadow-sm transition-all cursor-pointer\">\n                                        <div className=\"w-11 h-11 bg-gray-100 rounded-[8px] flex items-center justify-center text-gray-400 group-hover:bg-[#F5F3FF] group-hover:text-[#6366F1] transition-colors font-bold text-[10px]\">\n                                            {file.icon}\n                                        </div>\n                                        <div className=\"flex-1 min-w-0\">\n                                            <p className=\"text-[14px] font-bold text-gray-800 truncate\">{file.name}</p>\n                                            <p className=\"text-[11px] text-gray-400 font-normal uppercase\">{file.type} Â· {file.size}</p>\n                                        </div>\n                                    </motion.div>\n                                ))}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Footer */}\n                <div className=\"flex-none px-6 py-4 border-gray-100 bg-[#F5F5F7] flex items-center justify-between\">\n                    <div className=\"flex items-center gap-1 text-gray-400\">\n                        <button title='more' className=\"p-2 hover:bg-white hover:text-gray-600 rounded-xl transition-all\"><MoreHorizontal size={20} /></button>\n                        <button title='smile' className=\"p-2 hover:bg-white hover:text-gray-600 rounded-xl transition-all\"><Smile size={20} /></button>\n                        <button title='file' className=\"p-2 hover:bg-white hover:text-gray-600 rounded-xl transition-all\"><Paperclip size={20} /></button>\n                        <button title='link' className=\"p-2 hover:bg-white hover:text-gray-600 rounded-xl transition-all\"><Link2 size={20} /></button>\n                        <button title='ai' className=\"p-2 hover:bg-[#F5F3FF] hover:text-[#6366F1] rounded-xl transition-all\"><Sparkles size={20} /></button>\n                        <div className=\"w-[1px] h-5 bg-gray-200 mx-2\" />\n                    </div>\n\n                    <div className=\"flex items-center gap-4\">\n                        <span className=\"hidden sm:inline text-[12px] text-[#C6C5CA] font-medium\">Draft saved, 1m ago</span>\n                        <div className=\"flex items-center gap-2.5\">\n                            <button className=\"flex items-center gap-2 px-4 py-1.5 border border-gray-200 rounded-full text-[14px] font-normal text-[#535355] bg-transparent hover:bg-gray-50 shadow-sm transition-all\">\n                                <Calendar size={17} strokeWidth={2.5} /> Schedule\n                            </button>\n                            <motion.button\n                                whileHover={{ scale: 1.02 }}\n                                whileTap={{ scale: 0.98 }}\n                                onClick={() => onSend?.(data)}\n                                className=\"flex items-center gap-2 px-4 py-2 bg-[#0F0F0F] text-white rounded-full text-[14px] font-medium shadow-md hover:bg-[#222222] transition-all\"\n                            >\n                                <LuSend size={16} className=\"\" /> Send\n                            </motion.button>\n                        </div>\n                    </div>\n                </div>\n            </motion.div>\n\n            <style>{`\n        .custom-scrollbar::-webkit-scrollbar { width: 5px; }\n        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }\n        .custom-scrollbar::-webkit-scrollbar-thumb { background: #E5E7EB; border-radius: 20px; }\n        .custom-scrollbar { scrollbar-width: thin; scrollbar-color: #E5E7EB transparent; }\n      `}</style>\n        </div>\n    );\n};",
      "type": "registry:ui",
      "target": "components/ui/compose-email-card.tsx"
    }
  ],
  "type": "registry:ui"
}