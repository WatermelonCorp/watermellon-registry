{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "swap-currency",
  "dependencies": [
    "motion",
    "lucide-react"
  ],
  "files": [
    {
      "path": "src/components/ui/swap-currency.tsx",
      "content": "\"use client\";\n\nimport { useState, useRef, useEffect, type FC, type ChangeEvent } from \"react\";\nimport { motion, AnimatePresence } from \"motion/react\";\nimport { ChevronDown, Check, Sun, Moon } from \"lucide-react\";\n\n/* --- Types --- */\nexport interface Currency {\n  code: string;\n  countryCode: string;\n  flag: string;\n  rate: number;\n  name: string;\n}\n\ninterface SwapCurrencyCardProps {\n  currencies?: Currency[];\n  defaultFromCode?: string;\n  defaultToCode?: string;\n  defaultAmount?: string;\n}\n\n/* --- Default Currencies --- */\nconst DEFAULT_CURRENCIES: Currency[] = [\n  { code: \"USD\", countryCode: \"us\", flag: \"ðŸ‡ºðŸ‡¸\", rate: 1, name: \"US Dollar\" },\n  { code: \"EUR\", countryCode: \"eu\", flag: \"ðŸ‡ªðŸ‡º\", rate: 0.92, name: \"Euro\" },\n  { code: \"INR\", countryCode: \"in\", flag: \"ðŸ‡®ðŸ‡³\", rate: 83.12, name: \"Indian Rupee\" },\n  { code: \"GBP\", countryCode: \"gb\", flag: \"ðŸ‡¬ðŸ‡§\", rate: 0.79, name: \"British Pound\" },\n  { code: \"JPY\", countryCode: \"jp\", flag: \"ðŸ‡¯ðŸ‡µ\", rate: 150.2, name: \"Japanese Yen\" },\n];\n\n/* --- Flag Component --- */\ninterface FlagIconProps {\n  countryCode: string;\n  emoji: string;\n}\n\nconst FlagIcon: FC<FlagIconProps> = ({ countryCode, emoji }) => {\n  const [imgError, setImgError] = useState<boolean>(false);\n\n  useEffect(() => {\n    setImgError(false);\n  }, [countryCode]);\n\n  if (!countryCode) return <span className=\"text-xl\">{emoji}</span>;\n\n  const src =\n    countryCode === \"eu\"\n      ? \"https://upload.wikimedia.org/wikipedia/commons/b/b7/Flag_of_Europe.svg\"\n      : `https://flagcdn.com/${countryCode.toLowerCase()}.svg`;\n\n  return (\n    <div className=\"w-6 h-5 flex items-center justify-center rounded-xs overflow-hidden bg-transparent shrink-0 border border-gray-200 dark:border-zinc-700\">\n      {!imgError ? (\n        <img\n          src={src}\n          alt={countryCode}\n          className=\"w-full h-full object-cover\"\n          loading=\"lazy\"\n          onError={() => setImgError(true)}\n        />\n      ) : (\n        <span className=\"text-sm leading-none flex items-center justify-center h-full w-full\">\n          {emoji}\n        </span>\n      )}\n    </div>\n  );\n};\n\n/* --- Dropdown --- */\ninterface DropdownProps {\n  selected: Currency;\n  onSelect: (currency: Currency) => void;\n  currencies: Currency[];\n}\n\nconst Dropdown: FC<DropdownProps> = ({ selected, onSelect, currencies }) => {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const ref = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const close = (e: MouseEvent) => {\n      if (ref.current && !ref.current.contains(e.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", close);\n    return () => document.removeEventListener(\"mousedown\", close);\n  }, []);\n\n  return (\n    <div className=\"relative\" ref={ref}>\n      <button\n        onClick={() => setIsOpen((v) => !v)}\n        className=\"flex items-center gap-2 px-3 py-2 rounded-full border border-[#E5E5E9] dark:border-zinc-700 transition-all active:scale-95 bg-[#fefefe] dark:bg-zinc-800\"\n      >\n        <FlagIcon countryCode={selected.countryCode} emoji={selected.flag} />\n        <span className=\"text-sm font-semibold text-gray-700 dark:text-zinc-200\">\n          {selected.code}\n        </span>\n        <ChevronDown\n          className={`w-5 h-5 text-gray-400 transition-transform ${\n            isOpen ? \"rotate-180\" : \"\"\n          }`}\n        />\n      </button>\n\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            initial={{ opacity: 0, y: -8, scale: 0.96 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: -8, scale: 0.96 }}\n            transition={{ duration: 0.2 }}\n            className=\"absolute right-0 mt-2 w-48 bg-white dark:bg-zinc-800 rounded-2xl shadow-lg border-[1.6px] border-[#E5E5E9] dark:border-zinc-700 z-50 py-1\"\n          >\n            {currencies.map((currency) => (\n              <button\n                key={currency.code}\n                onClick={() => {\n                  onSelect(currency);\n                  setIsOpen(false);\n                }}\n                className=\"w-full flex items-center justify-between px-4 py-2.5 hover:bg-gray-50 dark:hover:bg-zinc-700/50 transition-colors\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <FlagIcon\n                    countryCode={currency.countryCode}\n                    emoji={currency.flag}\n                  />\n                  <span className=\"text-sm font-medium text-gray-700 dark:text-zinc-200\">\n                    {currency.code}\n                  </span>\n                </div>\n\n                {currency.code === selected.code && (\n                  <Check className=\"w-4 h-4 text-gray-400 dark:text-zinc-500\" />\n                )}\n              </button>\n            ))}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\n/* --- Animated Number --- */\ninterface AnimatedNumberProps {\n  value: string;\n}\n\nconst AnimatedNumber: FC<AnimatedNumberProps> = ({ value }) => {\n  const chars = String(value || \"0\").split(\"\");\n\n  return (\n    <div className=\"flex items-center text-2xl font-semibold text-[#2F2F33] dark:text-zinc-100\">\n      {chars.map((char, i) => (\n        <DigitColumn key={i} digit={char} />\n      ))}\n    </div>\n  );\n};\n\ninterface DigitColumnProps {\n  digit: string;\n}\n\nconst DigitColumn: FC<DigitColumnProps> = ({ digit }) => {\n  const digitHeight = 28;\n  const num = Number(digit);\n\n  if (Number.isNaN(num)) {\n    return (\n      <span className=\"inline-block w-[0.54em] text-center text-[#010103] dark:text-white font-bold\">\n        {digit}\n      </span>\n    );\n  }\n\n  return (\n    <div\n      className=\"relative overflow-hidden\"\n      style={{ height: digitHeight, width: \"0.6em\" }}\n    >\n      <motion.div\n        initial={false}\n        animate={{ y: -num * digitHeight }}\n        transition={{ type: \"spring\", stiffness: 350, damping: 30 }}\n        className=\"absolute top-0 left-0 flex flex-col\"\n      >\n        {Array.from({ length: 10 }).map((_, i) => (\n          <div\n            key={i}\n            style={{ height: digitHeight }}\n            className=\"flex items-center justify-center font-bold text-[#010103] dark:text-white\"\n          >\n            {i}\n          </div>\n        ))}\n      </motion.div>\n    </div>\n  );\n};\n\n/* --- MAIN COMPONENT --- */\nexport const SwapCurrencyCard: FC<SwapCurrencyCardProps> = ({\n  currencies = DEFAULT_CURRENCIES,\n  defaultFromCode = currencies[0].code,\n  defaultToCode = currencies[1].code,\n  defaultAmount = \"10\",\n}) => {\n  const fromDefault =\n    currencies.find((c) => c.code === defaultFromCode) || currencies[0];\n  const toDefault =\n    currencies.find((c) => c.code === defaultToCode) || currencies[1];\n\n  const [fromCurrency, setFromCurrency] = useState<Currency>(fromDefault);\n  const [toCurrency, setToCurrency] = useState<Currency>(toDefault);\n  const [fromAmount, setFromAmount] = useState<string>(defaultAmount);\n  const [toAmount, setToAmount] = useState<string>(\"9.58\");\n  const [isDark, setIsDark] = useState<boolean>(false);\n\n  useEffect(() => {\n    document.documentElement.classList.toggle(\"dark\", isDark);\n  }, [isDark]);\n\n  const convert = (amount: string, from: Currency, to: Currency): string => {\n    const val = parseFloat(amount);\n    if (isNaN(val)) return \"\";\n    const usd = val / from.rate;\n    return (usd * to.rate).toFixed(2);\n  };\n\n  const handleFromChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const val = e.target.value;\n    if (val === \"\" || /^\\d*\\.?\\d*$/.test(val)) {\n      setFromAmount(val);\n      setToAmount(convert(val, fromCurrency, toCurrency));\n    }\n  };\n\n  const handleToChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const val = e.target.value;\n    if (val === \"\" || /^\\d*\\.?\\d*$/.test(val)) {\n      setToAmount(val);\n      setFromAmount(convert(val, toCurrency, fromCurrency));\n    }\n  };\n\n  const rate = (toCurrency.rate / fromCurrency.rate).toFixed(2);\n\n  return (\n    <div className=\"h-screen w-full flex flex-col justify-center items-center bg-white dark:bg-zinc-950 transition-colors duration-500\">\n      <button\n        onClick={() => setIsDark(!isDark)}\n        className=\"mb-8 p-3 rounded-full bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 transition-all active:scale-90\"\n      >\n        {isDark ? (\n          <Sun className=\"text-yellow-400\" size={20} />\n        ) : (\n          <Moon className=\"text-zinc-600\" size={20} />\n        )}\n      </button>\n\n      <motion.div\n        initial={{ opacity: 0, scale: 0.92 }}\n        animate={{ opacity: 1, scale: 1 }}\n        transition={{ type: \"spring\", stiffness: 200, damping: 20 }}\n        className=\"w-full max-w-[420px] border-[1.6px] border-[#E5E5E9] dark:border-zinc-800 bg-[#FEFEFE] dark:bg-zinc-900 rounded-[40px] p-[32px] shadow-[0_32px_47px_-16px_rgba(0,0,0,0.1)] dark:shadow-[0_32px_60px_-16px_rgba(0,0,0,0.5)] flex flex-col gap-[24px]\"\n      >\n        <h2 className=\"text-[#898990] dark:text-zinc-500 font-semibold text-[20px]\">\n          Swap Currency\n        </h2>\n\n        <div className=\"flex flex-col gap-[8px]\">\n          <div className=\"flex items-center justify-between p-[16px] bg-[#F6F5FA] dark:bg-zinc-800/50 rounded-t-[24px] rounded-b-[16px]\">\n            <div className=\"relative w-1/2\">\n              <AnimatedNumber value={fromAmount} />\n              <input title=\"from\"\n                value={fromAmount}\n                onChange={handleFromChange}\n                className=\"absolute inset-0 bg-transparent outline-none text-transparent caret-[#2F2F33] dark:caret-zinc-100 text-[24px] font-semibold\"\n              />\n            </div>\n\n            <Dropdown\n              selected={fromCurrency}\n              currencies={currencies}\n              onSelect={(c) => {\n                setFromCurrency(c);\n                setToAmount(convert(fromAmount, c, toCurrency));\n              }}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between p-[16px] bg-[#F6F5FA] dark:bg-zinc-800/50 rounded-b-[24px] rounded-t-[16px]\">\n            <div className=\"relative w-1/2\">\n              <AnimatedNumber value={toAmount} />\n              <input title=\"to\"\n                value={toAmount}\n                onChange={handleToChange}\n                className=\"absolute inset-0 bg-transparent outline-none text-transparent caret-[#2F2F33] dark:caret-zinc-100 text-[24px] font-semibold\"\n              />\n            </div>\n\n            <Dropdown\n              selected={toCurrency}\n              currencies={currencies}\n              onSelect={(c) => {\n                setToCurrency(c);\n                setToAmount(convert(fromAmount, fromCurrency, c));\n              }}\n            />\n          </div>\n        </div>\n\n        <button className=\"w-full bg-[#262629] dark:bg-zinc-100 text-white dark:text-zinc-950 font-semibold py-[16px] rounded-[22px] text-[18px] hover:bg-black dark:hover:bg-white transition active:scale-[0.98] shadow-lg\">\n          Proceed\n        </button>\n\n        <div className=\"text-center text-[16px] text-[#9F9EA1] dark:text-zinc-500 font-medium\">\n          1 {fromCurrency.code} â‰ˆ {rate} {toCurrency.code}\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\n",
      "type": "registry:ui",
      "target": "components/ui/swap-currency.tsx"
    }
  ],
  "type": "registry:ui"
}