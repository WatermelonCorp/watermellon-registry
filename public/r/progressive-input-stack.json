{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "progressive-input-stack",
  "dependencies": [
    "motion",
    "lucide-react",
    "react-icons"
  ],
  "files": [
    {
      "path": "src/components/ui/progressive-input-stack.tsx",
      "content": "\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'motion/react';\nimport { ArrowRight, ArrowLeft } from 'lucide-react';\nimport { FaCheck } from 'react-icons/fa6';\nimport { Sun, Moon } from 'lucide-react';\n\nexport interface StepData {\n  id: string;\n  label: string;\n  type: 'text' | 'toggle';\n  placeholder?: string;\n}\n\ninterface ProgressiveInputStackProps {\n  steps: StepData[];\n  initialData?: Record<string, string | boolean>;\n  onSubmit?: (data: Record<string, string | boolean>) => void;\n  initialTheme?: 'light' | 'dark';\n}\n\nexport const ProgressiveInputStack: React.FC<ProgressiveInputStackProps> = ({\n  steps,\n  initialData,\n  onSubmit,\n  initialTheme = 'light',\n}) => {\n  const [currentStep, setCurrentStep] = useState(0);\n  const [formData, setFormData] = useState<Record<string, string | boolean>>(\n    initialData || steps.reduce((acc, step) => ({ ...acc, [step.id]: step.type === 'toggle' ? false : '' }), {})\n  );\n  const [isDark, setIsDark] = useState(initialTheme === 'dark');\n\n  const springTransition = {\n    type: 'spring' as const,\n    stiffness: 400,\n    damping: 35,\n    mass: 1,\n  };\n\n  // Sync theme\n  useEffect(() => {\n    if (isDark) document.documentElement.classList.add('dark');\n    else document.documentElement.classList.remove('dark');\n  }, [isDark]);\n\n  const handleNext = () => {\n    if (currentStep < steps.length - 1) {\n      setCurrentStep(prev => prev + 1);\n    } else {\n      onSubmit?.(formData);\n    }\n  };\n\n  const handleBack = () => {\n    if (currentStep > 0) setCurrentStep(prev => prev - 1);\n  };\n\n  const updateField = (id: string, value: string | boolean) => {\n    setFormData(prev => ({ ...prev, [id]: value }));\n  };\n\n  return (\n    <div className={`min-h-screen flex flex-col items-center justify-center p-6 transition-colors duration-500 ${isDark ? 'bg-zinc-950' : 'bg-white'}`}>\n      <div className=\"w-full max-w-[400px]\">\n        {/* Header with Theme Toggle */}\n        <div className=\"flex items-center justify-between mb-6 px-2\">\n          <h1 className={`text-3xl font-bold tracking-tight ${isDark ? 'text-zinc-200' : 'text-[#222222]'}`}>\n            Invite a friend\n          </h1>\n          <button\n            onClick={() => setIsDark(!isDark)}\n            className=\"p-2 rounded-full bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 transition-all shadow-sm active:scale-90\"\n          >\n            {isDark ? (\n              <Sun className=\"text-yellow-400\" size={20} />\n            ) : (\n              <Moon className=\"text-zinc-500\" size={20} />\n            )}\n          </button>\n        </div>\n\n        <div className=\"relative w-full flex flex-col gap-8\">\n          {/* The Stack */}\n          <div className=\"relative h-[60px] w-full perspective-1000\">\n            <AnimatePresence mode=\"popLayout\">\n              {steps.map((step, index) => {\n                const isVisible = index <= currentStep;\n                if (!isVisible) return null;\n                const position = currentStep - index;\n                const isTop = index === currentStep;\n\n                return (\n                  <motion.div\n                    key={step.id}\n                    initial={{ opacity: 0, scale: 0.9, y: 20 }}\n                    animate={{\n                      opacity: 1,\n                      scale: 1 - position * 0.05,\n                      y: -position * 10,\n                      zIndex: steps.length - position,\n                    }}\n                    exit={{ opacity: 0, scale: 0.9, y: 20 }}\n                    transition={springTransition}\n                    className={`absolute inset-0 border-2 rounded-2xl shadow-[0_4px_12px_rgba(0,0,0,0.03)] p-4 flex items-center transition-colors duration-200 ${\n                      !isTop ? 'pointer-events-none opacity-50' : 'opacity-100'\n                    } ${isDark ? 'bg-zinc-900 border-zinc-700' : 'bg-white border-[#E9E8EE]'}`}\n                  >\n                    {step.type === 'text' ? (\n                      <input\n                        autoFocus={isTop}\n                        type=\"text\"\n                        value={formData[step.id] as string}\n                        onChange={(e) => updateField(step.id, e.target.value)}\n                        placeholder={step.placeholder}\n                        className={`w-full text-lg font-bold capitalize outline-none ${\n                          isDark ? 'text-zinc-200 bg-zinc-900 placeholder-zinc-400' : 'text-[#242426] placeholder-[#85858B]/70'\n                        }`}\n                      />\n                    ) : (\n                      <div className=\"flex items-center justify-between w-full\">\n                        <span className={`text-lg font-bold ${isDark ? 'text-zinc-400' : 'text-[#85858B]'}`}>\n                          {step.label}\n                        </span>\n                        <button\n                          title=\"switch\"\n                          onClick={() => updateField(step.id, !formData[step.id])}\n                          className={`w-12 h-7.5 rounded-full transition-colors relative shadow-sm flex items-center p-1 ${\n                            formData[step.id] ? (isDark ? 'bg-zinc-200' : 'bg-[#242426]') : 'bg-[#ececf1] : dark:bg-[#242426]'\n                          }`}\n                        >\n                          <motion.div\n                            animate={{ x: formData[step.id] ? 20 : 0 }}\n                            transition={springTransition}\n                            className=\"w-5 h-5 bg-white rounded-full shadow-sm\"\n                          />\n                        </button>\n                      </div>\n                    )}\n                  </motion.div>\n                );\n              })}\n            </AnimatePresence>\n          </div>\n\n          {/* Navigation Buttons */}\n          <div className=\"flex items-center justify-between px-2\">\n            <div>\n              <AnimatePresence>\n                {currentStep > 0 && (\n                  <motion.button\n                    initial={{ opacity: 0, scale: 0.8 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    exit={{ opacity: 0, scale: 0.8 }}\n                    onClick={handleBack}\n                    className={`w-[50px] h-[50px] flex items-center justify-center rounded-full transition-colors duration-200 ${\n                      isDark ? 'bg-zinc-800 text-zinc-200 hover:bg-zinc-700' : 'bg-[#E5E4EE] text-[#000002] hover:bg-[#dad9e3]'\n                    }`}\n                  >\n                    <ArrowLeft size={24} strokeWidth={2.5} />\n                  </motion.button>\n                )}\n              </AnimatePresence>\n            </div>\n\n            <motion.button\n              layout\n              transition={springTransition}\n              onClick={handleNext}\n              className={`h-12 px-4 flex items-center gap-2 rounded-full font-bold shadow-md overflow-hidden ${\n                isDark ? 'bg-zinc-200 text-zinc-900 hover:opacity-90' : 'bg-[#000002] text-white hover:opacity-90'\n              }`}\n            >\n              <AnimatePresence mode=\"popLayout\">\n                {currentStep === steps.length - 1 ? (\n                  <motion.span\n                    key=\"done\"\n                    initial={{ y: 20, opacity: 0 }}\n                    animate={{ y: 0, opacity: 1 }}\n                    exit={{ y: -20, opacity: 0 }}\n                    transition={springTransition}\n                    className=\"flex items-center gap-2\"\n                  >\n                    <FaCheck size={22} strokeWidth={4} />\n                    <span className=\"text-xl\">Done</span>\n                  </motion.span>\n                ) : (\n                  <motion.span\n                    key=\"next\"\n                    initial={{ y: 20, opacity: 0 }}\n                    animate={{ y: 0, opacity: 1 }}\n                    exit={{ y: -20, opacity: 0 }}\n                    transition={springTransition}\n                    className=\"flex items-center gap-2\"\n                  >\n                    <span className=\"text-xl\">Next</span>\n                    <ArrowRight size={22} strokeWidth={3} />\n                  </motion.span>\n                )}\n              </AnimatePresence>\n            </motion.button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};",
      "type": "registry:ui",
      "target": "components/ui/progressive-input-stack.tsx"
    }
  ],
  "type": "registry:ui"
}