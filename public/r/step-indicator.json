{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "step-indicator",
  "dependencies": [
    "motion",
    "lucide-react"
  ],
  "files": [
    {
      "path": "src/components/ui/step-indicator.tsx",
      "content": "\"use client\";\n\nimport { useState, useRef, useEffect, type FC, type ReactNode } from \"react\";\nimport { motion, AnimatePresence } from \"motion/react\";\nimport { Sun, Moon } from \"lucide-react\";\n\n// --- Types ---\nexport interface Step {\n  id: string;\n  label: string;\n  icon: ReactNode;\n}\n\ninterface StepIndicatorProps {\n  steps?: Step[];          \n  currentStep?: number;    \n  onStepChange?: (index: number) => void;\n}\n\nexport const StepIndicator: FC<StepIndicatorProps> = ({\n  steps = [], \n  currentStep = 0, \n  onStepChange\n}) => {\n  const [hoveredIndex, setHoveredIndex] = useState<number | null>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [containerWidth, setContainerWidth] = useState<number>(0);\n  const [isDark, setIsDark] = useState<boolean>(false);\n\n  // Theme Sync\n  useEffect(() => {\n    if (isDark) document.documentElement.classList.add(\"dark\");\n    else document.documentElement.classList.remove(\"dark\");\n  }, [isDark]);\n\n  // Responsive Width Tracking\n  useEffect(() => {\n    const updateWidth = () => {\n      if (containerRef.current) setContainerWidth(containerRef.current.offsetWidth);\n    };\n\n    updateWidth();\n    window.addEventListener(\"resize\", updateWidth);\n    return () => window.removeEventListener(\"resize\", updateWidth);\n  }, []);\n\n  const activeIndex = hoveredIndex !== null ? hoveredIndex : currentStep;\n  const safeIndex = Math.min(Math.max(activeIndex, 0), steps.length - 1);\n\n  const calculatePosition = (index: number) => {\n    if (!containerWidth || steps.length === 0) return 0;\n    const stepWidth = containerWidth / steps.length;\n    return index * stepWidth + stepWidth / 2;\n  };\n\n  return (\n    <div className=\"h-screen w-full flex flex-col items-center justify-center bg-white dark:bg-zinc-950 transition-colors duration-500\">\n      \n      {/* THEME TOGGLE */}\n      <button \n        onClick={() => setIsDark(!isDark)}\n        className=\"mb-16 p-3 rounded-2xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-sm transition-all active:scale-90 hover:bg-zinc-100 dark:hover:bg-zinc-800\"\n      >\n        {isDark ? <Sun className=\"text-yellow-400\" size={20} /> : <Moon className=\"text-zinc-600\" size={20} />}\n      </button>\n\n      <div\n        className=\"relative flex flex-col items-center w-full max-w-[420px]\"\n        onMouseLeave={() => setHoveredIndex(null)}\n      >\n        {/* Animated Tooltip */}\n        <div className=\"relative w-full h-14 mb-4 flex items-center\">\n          {containerWidth > 0 && steps.length > 0 && (\n            <AnimatePresence mode=\"popLayout\" initial={false}>\n              <motion.div\n                key=\"tooltip-track\"\n                className=\"absolute top-0 left-0\"\n                animate={{ x: calculatePosition(safeIndex) }}\n                transition={{ type: \"spring\", stiffness: 260, damping: 28, mass: 0.8 }}\n              >\n                <motion.div\n                  layout\n                  key={`step-label-${safeIndex}`}\n                  style={{ x: \"-50%\" }}\n                  className=\"flex items-center gap-2 px-4 py-2 rounded-full bg-zinc-900 dark:bg-white text-zinc-50 dark:text-zinc-950 shadow-xl\"\n                  initial={{ opacity: 0, y: 10, scale: 0.9, filter: \"blur(8px)\" }}\n                  animate={{ opacity: 1, y: 0, scale: 1, filter: \"blur(0px)\" }}\n                  exit={{ opacity: 0, y: -10, scale: 0.9, filter: \"blur(8px)\" }}\n                  transition={{\n                    layout: { type: \"spring\", stiffness: 240, damping: 22 },\n                    opacity: { duration: 0.2 },\n                    filter: { duration: 0.3 }\n                  }}\n                >\n                  <motion.span layout=\"position\" className=\"flex items-center\">\n                    {steps[safeIndex].icon}\n                  </motion.span>\n\n                  <motion.span\n                    layout=\"position\"\n                    className=\"text-lg font-bold whitespace-nowrap\"\n                  >\n                    {steps[safeIndex].label}\n                  </motion.span>\n                </motion.div>\n              </motion.div>\n            </AnimatePresence>\n          )}\n        </div>\n\n        {/* Progress Segments */}\n        <div ref={containerRef} className=\"flex w-full gap-3 px-1 h-3 items-center\">\n          {steps.map((step, index) => {\n            const isSelected = index === activeIndex;\n            const isCompleted = index <= currentStep;\n\n            return (\n              <div\n                key={step.id}\n                className=\"relative flex-1 h-3 cursor-pointer group\"\n                onMouseEnter={() => setHoveredIndex(index)}\n                onClick={() => onStepChange?.(index)}\n              >\n                {/* Background Track */}\n                <div className=\"absolute inset-0 rounded-full bg-zinc-100 dark:bg-zinc-800 transition-colors\" />\n\n                {/* Fill Layer */}\n                <motion.div\n                  className=\"absolute inset-0 rounded-full\"\n                  initial={false}\n                  animate={{ \n                    backgroundColor: isSelected \n                      ? (isDark ? \"#ffffff\" : \"#09090b\") \n                      : isCompleted\n                        ? (isDark ? \"#3f3f46\" : \"#d4d4d8\")\n                        : (isDark ? \"#27272a\" : \"#f4f4f5\"),\n                    scaleY: isSelected ? 1.2 : 1 \n                  }}\n                  transition={{ type: \"spring\", stiffness: 300, damping: 25 }}\n                />\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};",
      "type": "registry:ui",
      "target": "components/ui/step-indicator.tsx"
    }
  ],
  "type": "registry:ui"
}