{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "waveform-scrub",
  "dependencies": [
    "lucide-react",
    "motion"
  ],
  "files": [
    {
      "path": "src/components/ui/waveform-scrub.tsx",
      "content": "import React, { useState, useEffect, useRef } from 'react';\nimport { motion, useMotionValue, useTransform, useMotionValueEvent } from 'motion/react';\nimport { TbPlayerPauseFilled, TbPlayerPlayFilled } from 'react-icons/tb';\nimport { Sun, Moon } from 'lucide-react'; \n\ninterface WaveformScrubProps {\n    duration?: number;\n    fileName?: string;\n    waveformHeights?: number[];\n}\n\nconst DEFAULT_WAVEFORM = [\n    4, 7, 9, 6, 11, 14, 12, 8, 5, 10, 15, 13, 11, 9, 6,\n    10, 12, 9, 7, 5, 8, 12, 10, 7, 6, 9, 13, 11, 8, 6, 5, 11, 8, 6, 5, 11, 8, 6, 5, 8, 5, 10, 15, 13, 11, 9,\n];\n\nexport const WaveformScrub: React.FC<WaveformScrubProps> = ({\n    duration = 29,\n    fileName = 'Mom.mp3',\n    waveformHeights = DEFAULT_WAVEFORM,\n}) => {\n    const [currentTime, setCurrentTime] = useState(4);\n    const [isPlaying, setIsPlaying] = useState(false);\n    const [isDark, setIsDark] = useState(false); \n\n    const containerWidth = 392;\n    const x = useMotionValue((4 / duration) * containerWidth);\n    const timerRef = useRef<ReturnType<typeof setInterval> | null>(null);\n\n    useEffect(() => {\n        if (isPlaying && currentTime < duration) {\n            timerRef.current = setInterval(() => {\n                setCurrentTime((prev) => {\n                    const next = Math.min(prev + 0.1, duration);\n                    x.set((next / duration) * containerWidth);\n                    if (next >= duration) setIsPlaying(false);\n                    return next;\n                });\n            }, 100);\n        } else {\n            if (timerRef.current) clearInterval(timerRef.current);\n        }\n        return () => { if (timerRef.current) clearInterval(timerRef.current); };\n    }, [isPlaying, duration, x, containerWidth]);\n\n    useMotionValueEvent(x, 'change', (latest) => {\n        if (!isPlaying) {\n            const progress = latest / containerWidth;\n            setCurrentTime(progress * duration);\n        }\n    });\n\n    const activeProgress = useTransform(x, [0, containerWidth], ['0%', '100%']);\n    const displayTime = Math.round(duration - currentTime);\n\n    return (\n        <div className={`flex flex-col items-center justify-center min-h-screen font-sans antialiased transition-colors duration-500 ${isDark ? 'bg-[#0A0A0A]' : 'bg-[#FEFEFE]'}`}>\n\n            {/* Theme Toggle Button */}\n            <button\n                onClick={() => setIsDark(!isDark)}\n                className={`mb-12 p-3 rounded-full transition-all active:scale-95 border ${isDark ? 'bg-[#1C1C1E] border-white/10 text-yellow-400' : 'bg-white border-black/5 text-gray-400 shadow-sm'\n                    }`}\n            >\n                {isDark ? <Sun size={20} /> : <Moon size={20} />}\n            </button>\n\n            {/* OUTER CONTAINER */}\n            <div className={`w-[440px] rounded-[24px] shadow-sm pt-4 pb-3 px-2 relative transition-colors duration-300 ${isDark ? 'bg-[#1C1C1E]' : 'bg-[#E5E4F0]'\n                }`}>\n\n                {/* HEADER SECTION */}\n                <div className=\"flex items-center justify-between px-2 pr-4 mb-4\">\n                    <div className=\"flex items-center gap-4\">\n                        <button\n                            onClick={() => setIsPlaying(!isPlaying)}\n                            className={`transition-all active:scale-90 ${isDark ? 'text-white' : 'text-[#1C1C1E]'}`}\n                        >\n                            {isPlaying ? <TbPlayerPauseFilled size={22} /> : <TbPlayerPlayFilled size={22} />}\n                        </button>\n                        <span className={`text-[19px] font-normal tracking-tight transition-colors ${isDark ? 'text-[#A1A1AA]' : 'text-[#313138]'\n                            }`}>\n                            {fileName}\n                        </span>\n                    </div>\n                    <span className={`text-[20px] font-semibold tabular-nums transition-colors ${isDark ? 'text-white' : 'text-[#27262D]'\n                        }`}>\n                        {displayTime}s\n                    </span>\n                </div>\n\n                {/* INNER WAVEFORM CARD */}\n                <div className={`rounded-[16px] h-[68px] relative flex items-center justify-center shadow-[inset_0_1px_4px_rgba(0,0,0,0.02)]  overflow-hidden transition-colors duration-300 ${isDark ? 'bg-[#0A0A0A] border-[1.6px] border-[#0A0A0A]/70' : 'bg-[#fefefe] border-[1.6px] border-[#fefefe]/70'\n                    }`}>\n\n                    <div\n                        className={`absolute inset-0 pointer-events-none transition-opacity ${isDark ? 'opacity-[0.1]' : 'opacity-[0.04]'}`}\n                        style={{\n                            backgroundImage: `linear-gradient(-45deg, ${isDark ? '#FFF' : '#000'} 25%, transparent 25%, transparent 50%, ${isDark ? '#FFF' : '#000'} 50%, ${isDark ? '#FFF' : '#000'} 75%, transparent 75%, transparent)`,\n                            backgroundSize: '4px 4px',\n                        }}\n                    />\n\n                    {/* WAVEFORM WRAPPER */}\n                    <div className=\"relative h-[28px]\" style={{ width: containerWidth }}>\n\n                        {/* INACTIVE LAYER */}\n                        <div className=\"absolute inset-0 flex justify-between items-center w-full\">\n                            {waveformHeights.map((h, i) => (\n                                <div\n                                    key={i}\n                                    className={`w-[3px] rounded-full shrink-0 transition-colors ${isDark ? 'bg-[#27272A]' : 'bg-[#C9C8D2]'\n                                        }`}\n                                    style={{ height: h * 1.6 }}\n                                />\n                            ))}\n                        </div>\n\n                        {/* ACTIVE LAYER */}\n                        <motion.div\n                            style={{ width: activeProgress }}\n                            className=\"absolute inset-y-0 left-0 overflow-hidden z-10 pointer-events-none\"\n                        >\n                            <div className=\"flex justify-between items-center h-full\" style={{ width: containerWidth }}>\n                                {waveformHeights.map((h, i) => (\n                                    <div\n                                        key={i}\n                                        className={`w-[3px] rounded-full shrink-0 transition-colors ${isDark ? 'bg-[#A1A1AA]' : 'bg-[#6A6971]'\n                                            }`}\n                                        style={{ height: h * 1.6 }}\n                                    />\n                                ))}\n                            </div>\n                        </motion.div>\n                    </div>\n                </div>\n\n                {/* SCRUBBER HANDLE */}\n                <motion.div\n                    drag=\"x\"\n                    dragConstraints={{ left: 0, right: containerWidth }}\n                    dragElastic={0}\n                    dragMomentum={false}\n                    onDragStart={() => setIsPlaying(false)}\n                    style={{ x }}\n                    className=\"absolute -top-8 left-6 -translate-y-1/2 w-[28px] h-[198px] -ml-[14px] flex flex-col items-center z-50 cursor-grab active:cursor-grabbing\"\n                >\n                    {/* Top Hook Head */}\n                    <div\n                        className={`w-[22px] h-[18px] shadow-[0_4px_20px_rgba(0,0,0,0.3)] transition-colors ${isDark ? 'bg-white' : 'bg-[#1C1C1E]'\n                            }`}\n                        style={{\n                            clipPath: `polygon(15% 0%, 85% 0%, 100% 20%, 100% 60%, 60% 100%, 40% 100%, 0% 60%, 0% 20%)`\n                        }}\n                    />\n                    {/* Vertical Line */}\n                    <div className={`w-[4px] flex-1 shadow-md rounded-b-full transition-colors ${isDark ? 'bg-white' : 'bg-[#1C1C1E]'\n                        }`} />\n                </motion.div>\n            </div>\n        </div>\n    );\n};",
      "type": "registry:ui",
      "target": "components/ui/waveform-scrub.tsx"
    }
  ],
  "type": "registry:ui"
}