{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "morphing-discovery-bar",
  "dependencies": [
    "lucide-react",
    "motion"
  ],
  "files": [
    {
      "path": "src/components/ui/morphing-discovery-bar.tsx",
      "content": "import React, { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence, LayoutGroup } from 'motion/react';\nimport { Search, X, Sun, Moon } from 'lucide-react';\nimport { FaFire } from 'react-icons/fa6';\nimport { MdFavorite } from 'react-icons/md';\n\nexport interface Category {\n    id: string;\n    label: string;\n    icon: React.ReactNode;\n    activeColor: string;\n    activeTextColor: string;\n}\n\nconst defaultItems: Category[] = [\n    {\n        id: 'popular',\n        label: 'Popular',\n        icon: <FaFire size={22} className=\"fill-current\" />,\n        activeColor: '#F9EBEF',\n        activeTextColor: '#FF3B30'\n    },\n    {\n        id: 'favorites',\n        label: 'Favorites',\n        icon: <MdFavorite size={22} className=\"fill-current\" />,\n        activeColor: '#F9EBEF',\n        activeTextColor: '#FD2649'\n    },\n];\n\nexport const MorphingDiscoveryBar: React.FC<{ categories: Category[] }> = ({ categories = defaultItems }) => {\n    const [isSearching, setIsSearching] = useState(false);\n    const [activeTab, setActiveTab] = useState(categories[0].id);\n    const [searchValue, setSearchValue] = useState(\"\");\n    const [isDark, setIsDark] = useState(false);\n    const inputRef = useRef<HTMLInputElement>(null);\n\n    useEffect(() => {\n        if (isSearching) inputRef.current?.focus();\n    }, [isSearching]);\n\n    const transition = {\n        type: \"spring\",\n        stiffness: 520,\n        damping: 32,\n        mass: 1\n    } as const;\n\n    return (\n        <div className={`min-h-screen h-full flex flex-col items-center justify-center transition-colors duration-500 ${isDark ? 'bg-[#121212]' : 'bg-[#F0F0F0]'}`}>\n\n            {/* Theme Toggle */}\n            <button\n                onClick={() => setIsDark(!isDark)}\n                className={`mb-8 p-3 rounded-full border transition-all ${isDark ? 'bg-[#1E1E1E] border-gray-800 text-yellow-400' : 'bg-white border-gray-200 text-gray-500 shadow-sm'}`}\n            >\n                {isDark ? <Sun size={20} /> : <Moon size={20} />}\n            </button>\n\n            <div className=\"flex items-center justify-center h-24 bg-transparent\">\n                <LayoutGroup>\n                    <motion.div\n                        layout\n                        transition={transition}\n                        className=\"flex items-center gap-3 p-2 rounded-[32px]  backdrop-blur-md\"\n                    >\n                        {/* SEARCH COMPONENT */}\n                        <motion.div\n                            layout\n                            transition={transition}\n                            style={{ borderRadius: 28 }}\n                            className={`relative flex items-center shadow-sm border overflow-hidden transition-colors ${isSearching ? 'w-80 h-[58px]' : 'w-[58px] h-[58px]'\n                                } ${isDark ? 'bg-[#1E1E1E] border-gray-800' : 'bg-[#fefefe] border-gray-100'}`}\n                        >\n                            <div className=\"flex items-center w-full px-4 h-full\">\n                                <motion.div layout=\"position\" transition={transition}>\n                                    <Search\n                                        size={22}\n                                        strokeWidth={3}\n                                        className={`shrink-0 transition-colors ${isDark ? 'text-gray-400' : 'text-[#212121]'}`}\n                                    />\n                                </motion.div>\n\n                                <AnimatePresence mode=\"wait\">\n                                    {isSearching && (\n                                        <motion.input\n                                            key=\"search-input\"\n                                            ref={inputRef}\n                                            initial={{ opacity: 0, x: -5 }}\n                                            animate={{ opacity: 1, x: 0 }}\n                                            exit={{ opacity: 0, x: -5 }}\n                                            transition={{ duration: 0.15 }}\n                                            placeholder=\"Search\"\n                                            className={`bg-transparent border-none outline-none w-full text-[17px] font-medium ml-2 transition-colors ${isDark ? 'text-white placeholder:text-gray-600' : 'text-[#212121] placeholder:text-[#BABABA]'\n                                                }`}\n                                            value={searchValue}\n                                            onChange={(e) => setSearchValue(e.target.value)}\n                                        />\n                                    )}\n                                </AnimatePresence>\n\n                                {!isSearching && (\n                                    <motion.button\n                                        layoutId=\"search-click-overlay\"\n                                        className=\"absolute inset-0 z-10 w-full h-full\"\n                                        onClick={() => setIsSearching(true)}\n                                    />\n                                )}\n                            </div>\n                        </motion.div>\n\n                        {/* CATEGORIES*/}\n                        <AnimatePresence mode=\"popLayout\">\n                            {!isSearching ? (\n                                <motion.div\n                                    key=\"categories-list\"\n                                    layout\n                                    initial={{ opacity: 0, x: 10, filter: 'blur(10px)' }}\n                                    animate={{ opacity: 1, x: 0, filter: 'blur(0px)' }}\n                                    exit={{ opacity: 0, x: 20, filter: 'blur(10px)' }}\n                                    whileTap={{ scale: 1.04 }}\n                                    transition={transition}\n                                    className={`flex items-center gap-1 rounded-full p-1.5 py-1 transition-colors border ${isDark ? 'bg-[#1E1E1E] border-gray-800' : 'bg-[#fefefe] border-gray-100'\n                                        }`}\n                                >\n                                    {categories.map((cat) => {\n                                        const isActive = activeTab === cat.id;\n                                        // Specific adjustment for dark mode labels to keep them visible but muted\n                                        const labelColor = isActive\n                                            ? cat.activeTextColor\n                                            : (isDark ? '#888888' : '#3F3F46');\n\n                                        return (\n                                            <motion.button\n                                                key={cat.id}\n                                                layout\n                                                onClick={() => setActiveTab(cat.id)}\n                                                className=\"relative px-7 py-3.5 rounded-full flex items-center gap-2 transition-colors group\"\n                                                style={{ color: labelColor }}\n                                            >\n                                                {isActive && (\n                                                    <motion.div\n                                                        layoutId=\"pill-bg\"\n                                                        className=\"absolute inset-0 z-0 rounded-full shadow-sm\"\n                                                        style={{\n                                                            backgroundColor: isDark ? '#2D2D2D' : cat.activeColor,\n                                                            border: isDark ? '1px solid #444' : 'none'\n                                                        }}\n                                                        transition={transition}\n                                                    />\n                                                )}\n                                                <span className=\"relative z-10\">{cat.icon}</span>\n                                                <span className=\"relative z-10 font-bold text-xl tracking-tight \">\n                                                    {cat.label}\n                                                </span>\n                                            </motion.button>\n                                        );\n                                    })}\n                                </motion.div>\n                            ) : (\n                                <motion.button\n                                    key=\"close-action\"\n                                    layout\n                                    initial={{ scale: 0.8, opacity: 0, rotate: -90 }}\n                                    animate={{ scale: 1, opacity: 1, rotate: 0 }}\n                                    exit={{ scale: 0.8, opacity: 0, rotate: -90 }}\n                                    transition={transition}\n                                    whileTap={{ scale: 1.04 }}\n                                    onClick={() => {\n                                        setIsSearching(false);\n                                        setSearchValue(\"\");\n                                    }}\n                                    className={`w-14 h-14 rounded-full flex items-center justify-center shadow-sm border shrink-0 transition-colors ${isDark ? 'bg-[#1E1E1E] border-gray-800 text-white' : 'bg-white border-gray-100 text-[#212121]'\n                                        }`}\n                                >\n                                    <X size={24} strokeWidth={2.5} />\n                                </motion.button>\n                            )}\n                        </AnimatePresence>\n                    </motion.div>\n                </LayoutGroup>\n            </div>\n        </div>\n    );\n};",
      "type": "registry:ui",
      "target": "components/ui/morphing-discovery-bar.tsx"
    }
  ],
  "type": "registry:ui"
}