{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "draggable-toolbar",
  "dependencies": [
    "lucide-react",
    "motion"
  ],
  "files": [
    {
      "path": "src/components/ui/draggable-toolbar.tsx",
      "content": "import React, { useState, useRef, useEffect } from 'react';\nimport { motion, useMotionValue, AnimatePresence } from 'motion/react';\nimport { Menu, X } from 'lucide-react';\n\ninterface DraggableToolbarProps {\n    label?: string;\n    onClose?: () => void;\n}\n\nexport const DraggableToolbar: React.FC<DraggableToolbarProps> = ({ \n    label = \"Skipper Toolbar\", \n    onClose \n}) => {\n    const [isVisible, setIsVisible] = useState(true);\n    const [isDragging, setIsDragging] = useState(false);\n    const [isHovered, setIsHovered] = useState(false);\n    const [isOverTarget, setIsOverTarget] = useState(false);\n\n    const containerRef = useRef<HTMLDivElement>(null);\n    const closeZoneRef = useRef<HTMLDivElement>(null);\n\n    // Initial positions\n    const x = useMotionValue(0);\n    const y = useMotionValue(0);\n    \n    // Side detection logic for tooltip direction\n    const [isOnRightSide, setIsOnRightSide] = useState(true);\n\n    useEffect(() => {\n        if (containerRef.current) {\n            const { width, height } = containerRef.current.getBoundingClientRect();\n            x.set(width - 64);\n            y.set(height / 2);\n        }\n    }, []);\n\n    // Monitoring X for side switching\n    useEffect(() => {\n        const unsub = x.onChange((latest) => {\n            if (containerRef.current) {\n                setIsOnRightSide(latest > containerRef.current.offsetWidth / 2);\n            }\n        });\n        return () => unsub();\n    }, [x]);\n\n    useEffect(() => {\n        const unsubscribe = y.onChange(() => {\n            if (isDragging && closeZoneRef.current && containerRef.current) {\n                const rect = closeZoneRef.current.getBoundingClientRect();\n                const containerRect = containerRef.current.getBoundingClientRect();\n\n                const currentViewportX = containerRect.left + x.get();\n                const currentViewportY = containerRect.top + y.get();\n\n                const buffer = 35;\n                const collision =\n                    currentViewportX >= rect.left - buffer &&\n                    currentViewportX <= rect.right + buffer &&\n                    currentViewportY >= rect.top - buffer &&\n                    currentViewportY <= rect.bottom + buffer;\n\n                setIsOverTarget(collision);\n            }\n        });\n        return () => unsubscribe();\n    }, [isDragging, x, y]);\n\n    const handleDragEnd = (_event: any, _info: any) => {\n        setIsDragging(false);\n        if (isOverTarget) {\n            setIsVisible(false);\n            if (onClose) onClose();\n            return;\n        }\n\n        if (containerRef.current) {\n            const { width } = containerRef.current.getBoundingClientRect();\n            const currentX = x.get();\n            if (currentX > width / 2) {\n                x.set(width - 64);\n            } else {\n                x.set(24);\n            }\n        }\n        setIsOverTarget(false);\n    };\n\n    if (!isVisible) return null;\n\n    return (\n        <div\n            ref={containerRef}\n            className=\"relative h-screen w-full bg-[#050505] overflow-hidden select-none\"\n        >\n            {/* Background Guide */}\n            <div className=\"absolute inset-0 flex flex-col items-center pt-32 opacity-90 pointer-events-none\">\n                <div className=\"text-zinc-500 uppercase tracking-[0.3em] text-[10px] font-bold text-center leading-relaxed\">\n                    TRY<br />DRAG/DROP<br />THE BUTTON\n                </div>\n                <div className=\"h-32 w-[1px] bg-gradient-to-b from-zinc-700 to-transparent mt-6\" />\n            </div>\n\n            <motion.div\n                drag\n                dragConstraints={containerRef}\n                dragElastic={0.1}\n                dragMomentum={false}\n                onDragStart={() => setIsDragging(true)}\n                onDragEnd={handleDragEnd}\n                onMouseEnter={() => setIsHovered(true)}\n                onMouseLeave={() => setIsHovered(false)}\n                style={{ x, y, zIndex: 50 }}\n                className=\"absolute top-0 left-0 cursor-grab active:cursor-grabbing pointer-events-auto\"\n            >\n                <div className=\"relative flex items-center group\">\n                    <div className={`w-12 h-12 bg-[#0F0F0F] border rounded-full flex items-center justify-center shadow-2xl transition-all duration-200 ${isOverTarget ? 'border-transparent scale-90' : 'border-white/70'}`}>\n                        <Menu size={26} className=\"text-white\" />\n                        {!isOverTarget && (\n                            <div className=\"absolute top-2 right-2 w-2.5 h-2.5 bg-blue-500 rounded-full border-2 border-black\" />\n                        )}\n                    </div>\n\n                    <AnimatePresence>\n                        {isHovered && !isDragging && (\n                            <motion.div\n                                initial={{\n                                    opacity: 0,\n                                    scale: 0.95,\n                                    x: isOnRightSide ? 20 : -20\n                                }}\n                                animate={{\n                                    opacity: 1,\n                                    scale: 1,\n                                    x: isOnRightSide ? -160 : 60\n                                }}\n                                exit={{\n                                    opacity: 0,\n                                    scale: 0.95,\n                                    x: isOnRightSide ? 20 : -20\n                                }}\n                                transition={{ type: \"spring\", stiffness: 400, damping: 30 }}\n                                className=\"absolute left-0 pointer-events-auto\"\n                            >\n                                <div className=\"relative flex items-center px-4 py-2.5 bg-[#0a0a0a] border border-zinc-800/80 rounded-xl shadow-2xl w-40\">\n                                    <span className=\"text-[13px] font-medium shrink-0 text-white/90 tracking-tight mr-3\">\n                                        {label}\n                                    </span>\n\n                                    <div className=\"flex items-center justify-center w-7 h-7 bg-zinc-900/50 border border-zinc-800 rounded-md shadow-inner p-2\">\n                                        <span className=\"text-white/90 text-sm\">âŒ˜</span>\n                                    </div>\n\n                                    {isOnRightSide ? (\n                                        <div className=\"absolute -right-[6px] top-1/2 -translate-y-1/2 w-3 h-3 rotate-45 bg-[#0a0a0a] border-r border-t border-zinc-800/80\" />\n                                    ) : (\n                                        <div className=\"absolute -left-[6px] top-1/2 -translate-y-1/2 w-3 h-3 rotate-45 bg-[#0a0a0a] border-l border-b border-zinc-800/80\" />\n                                    )}\n                                </div>\n                            </motion.div>\n                        )}\n                    </AnimatePresence>\n                </div>\n            </motion.div>\n\n            {/* Target Drop Zone */}\n            <AnimatePresence>\n                {isDragging && (\n                    <motion.div\n                        initial={{ opacity: 0, y: 30 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        exit={{ opacity: 0, y: 30 }}\n                        className=\"absolute bottom-12 left-1/2 -translate-x-1/2 flex flex-col items-center gap-3 pointer-events-none\"\n                    >\n                        <div\n                            ref={closeZoneRef}\n                            className={`w-14 h-14 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${isOverTarget ? 'border-blue-500 bg-blue-500/10 scale-110 shadow-[0_0_15px_rgba(59,130,246,0.5)]' : 'border-dashed border-white/70 bg-black/20'}`}\n                        >\n                            {!isOverTarget && <X size={20} className=\"text-zinc-500\" />}\n                        </div>\n                        <span className={`text-[10px] uppercase tracking-widest font-bold transition-colors ${isOverTarget ? 'text-blue-400' : 'text-zinc-500'}`}>\n                            {isOverTarget ? 'Release to close' : 'Leave here to close'}\n                        </span>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n        </div>\n    );\n};",
      "type": "registry:ui",
      "target": "components/ui/draggable-toolbar.tsx"
    }
  ],
  "type": "registry:ui"
}