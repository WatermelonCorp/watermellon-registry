{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "task-widget",
  "dependencies": [
    "framer-motion",
    "lucide-react"
  ],
  "files": [
    {
      "path": "src/components/ui/task-widget.tsx",
      "content": "import React, { useState } from 'react';\nimport { motion, AnimatePresence, LayoutGroup } from 'framer-motion';\nimport {\n  MoreHorizontal,\n  Check,\n  ChevronDown,\n  Sun,\n  Moon\n} from 'lucide-react';\nimport { Flag01Icon, Settings03Icon } from '@hugeicons/core-free-icons';\nimport { HugeiconsIcon } from '@hugeicons/react';\nimport { BiSolidHourglassBottom } from 'react-icons/bi';\nimport { IoIosCheckmarkCircleOutline } from 'react-icons/io';\n\n// --- Types ---\nexport interface Subtask {\n  id: string;\n  title: string;\n  completed: boolean;\n}\n\nexport interface Assignee {\n  name: string;\n  avatar: string;\n  color: string;\n}\n\nexport interface TaskData {\n  title: string;\n  progress: number;\n  completedCount: number;\n  totalCount: number;\n  priority: string;\n  status: string;\n  subtasks: Subtask[];\n  assignees: Assignee[];\n}\n\ninterface Props {\n  data: TaskData;\n}\n\nexport const TaskWidget: React.FC<Props> = ({ data }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [theme, setTheme] = useState<'light' | 'dark'>('light');\n\n  const isDark = theme === 'dark';\n\n\n  const colors = {\n    bg: isDark ? 'bg-[#0A0A0B]' : 'bg-[#FEFEFE]',\n    cardBg: isDark ? 'bg-[#121214]' : 'bg-white',\n    cardBorder: isDark ? 'border-[#1E1E21]' : 'border-[#F4F4F4]',\n    titleText: isDark ? 'text-[#F4F4F4]' : 'text-[#28272A]',\n    secondaryText: isDark ? 'text-[#8E8E93]' : 'text-[#707075]',\n    iconContainer: isDark ? 'bg-[#1C1C1E] border-[#2C2C2E]' : 'bg-white border-[#EFEFEF]',\n    progressTrack: isDark ? 'bg-[#2C2C2E]' : 'bg-[#E7E4F0]',\n    subtaskLine: isDark ? 'bg-[#2C2C2E]' : 'bg-[#D6D5DC]',\n    subtaskCheck: isDark ? 'bg-transparent border-[#48484A]' : 'bg-white border-[#CCCBD2]',\n    collapsedHeader: isDark ? 'bg-[#1C1C1E]' : 'bg-[#F0EFF6]',\n    expandedProgressBg: isDark ? 'bg-[#1C1C1E]/50 border-[#2C2C2E]' : 'bg-gray-50/50 border-[#E9E8EB]'\n  };\n\n  const springTransition = {\n    type: \"spring\",\n    stiffness: 300,\n    damping: 28,\n    mass: 1\n  } as const;\n\n  const toggleTheme = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    setTheme(prev => prev === 'light' ? 'dark' : 'light');\n  };\n\n  return (\n    <div className={`min-h-screen ${colors.bg} flex flex-col items-center justify-center p-10 transition-colors duration-300`}>\n      \n      {/* --- Theme Toggle --- */}\n      <motion.button\n        whileTap={{ scale: 0.9 }}\n        onClick={toggleTheme}\n        className={`mb-8 p-3 rounded-2xl border ${isDark ? 'bg-[#121214] border-[#1E1E21] text-yellow-400' : 'bg-white border-[#F4F4F4] text-slate-800'} shadow-sm transition-colors`}\n      >\n        {isDark ? <Sun size={20} /> : <Moon size={20} />}\n      </motion.button>\n\n      <LayoutGroup>\n        <motion.div\n          layout\n          initial={false}\n          onClick={() => setIsOpen(!isOpen)}\n          transition={springTransition}\n          className={`${colors.cardBg} border-2 ${colors.cardBorder} shadow-xl cursor-pointer overflow-hidden select-none relative transition-colors`}\n          style={{\n            borderRadius: isOpen ? 26 : 20,\n            width: 440,\n            padding: isOpen ? 22 : 12,\n          }}\n        >\n          {/* --- Header Section --- */}\n          <div className=\"flex items-center justify-between relative z-10\">\n            <motion.div\n              layout=\"position\"\n              transition={springTransition}\n              className={`flex items-center gap-3 ${isOpen ? 'bg-transparent' : colors.collapsedHeader} px-3 pl-1 rounded-lg transition-colors`}\n            >\n              <motion.div\n                layout\n                transition={springTransition}\n                className={`flex items-center justify-center border-[1.7px] my-0.5 rounded-xl transition-colors ${colors.iconContainer}`}\n                style={{ width: isOpen ? 48 : 36, height: isOpen ? 48 : 36 }}\n              >\n                <HugeiconsIcon icon={Settings03Icon} size={isOpen ? 24 : 18} color={isDark ? \"#8E8E93\" : \"#949497\"} strokeWidth={1.5} />\n              </motion.div>\n              <motion.h2\n                layout\n                transition={springTransition}\n                className={`font-semibold font-sans origin-left transition-colors ${colors.titleText} ${isOpen ? 'text-3xl' : 'text-base'}`}\n              >\n                {data.title}\n              </motion.h2>\n            </motion.div>\n\n            <AnimatePresence mode=\"popLayout\" initial={false}>\n              {!isOpen ? (\n                <motion.div\n                  key=\"collapsed-progress\"\n                  initial={{ opacity: 0, scale: 0.9, x: 10 }}\n                  animate={{ opacity: 1, scale: 1, x: 0 }}\n                  exit={{ opacity: 0, scale: 0.9, x: 10 }}\n                  transition={{ duration: 0.15 }}\n                  className=\"flex items-center gap-3\"\n                >\n                  <div className={`w-32 h-2 ${colors.progressTrack} rounded-full overflow-hidden relative transition-colors`}>\n                    <motion.div\n                      layout\n                      className=\"h-full bg-[#1EBF46] rounded-full relative overflow-hidden\"\n                      style={{ width: `${data.progress}%` }}\n                    >\n                      <motion.div\n                        initial={{ x: '-100%' }}\n                        animate={{ x: '100%' }}\n                        transition={{ repeat: Infinity, duration: 1.5, ease: \"linear\" }}\n                        className=\"absolute inset-0 w-full h-full\"\n                        style={{ background: 'linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent)' }}\n                      />\n                    </motion.div>\n                  </div>\n                  <span className={`text-base font-medium transition-colors ${colors.secondaryText}`}>{data.progress}%</span>\n                </motion.div>\n              ) : (\n                <motion.button\n                  key=\"more-btn\"\n                  initial={{ opacity: 0, scale: 0.8 }}\n                  animate={{ opacity: 1, scale: 1 }}\n                  exit={{ opacity: 0, scale: 0.8 }}\n                  transition={{ duration: 0.15 }}\n                  className={`${colors.cardBg} border-2 ${colors.cardBorder} p-1.5 px-1.5 rounded-md ${isDark ? 'text-white' : 'text-black'} transition-colors`}\n                >\n                  <MoreHorizontal size={22} />\n                </motion.button>\n              )}\n            </AnimatePresence>\n          </div>\n\n          {/* --- Collapsed Sub-Header --- */}\n          <AnimatePresence mode=\"popLayout\">\n            {!isOpen && (\n              <motion.div\n                layout\n                initial={{ opacity: 0, y: 5 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: 5 }}\n                transition={{ duration: 0.15 }}\n                className=\"flex items-center justify-between mt-3 px-1\"\n              >\n                <div className=\"flex items-center gap-4 text-sm font-medium\">\n                  <div className={`flex items-center gap-1.5 ${isDark ? 'text-[#8E8E93]' : 'text-[#757578]'}`}>\n                    <HugeiconsIcon icon={Flag01Icon} size={22} color=\"#ADACB8\" fill='#ADACB8' strokeWidth={1.5} />\n                    {data.priority}\n                  </div>\n                  <div className={`flex items-center gap-1.5 ${isDark ? 'text-[#8E8E93]' : 'text-[#757578]'}`}>\n                    <BiSolidHourglassBottom color='#ADACB8' size={22} />\n                    {data.status}\n                  </div>\n                </div>\n                <div className=\"flex -space-x-2\">\n                  {data.assignees.map((u, i) => (\n                    <motion.img\n                      layout\n                      key={i}\n                      src={u.avatar}\n                      className={`w-8 h-8 rounded-full border-2 shadow-lg ${isDark ? 'border-[#2C2C2E]' : 'border-gray-200'}`}\n                    />\n                  ))}\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n\n          {/* --- Expanded Content --- */}\n          <AnimatePresence mode=\"popLayout\">\n            {isOpen && (\n              <motion.div\n                layout\n                initial={{ opacity: 0, y: -20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20, transition: { duration: 0.1 } }}\n                transition={{ ...springTransition, delay: 0.05 }}\n                className=\"mt-6 origin-top\"\n              >\n                {/* Progress Bar Container */}\n                <div className={`flex items-center gap-2 px-2.5 py-1.5 border-[1.5px] rounded-full mb-7 w-fit transition-colors ${colors.expandedProgressBg}`}>\n                  <div className=\"w-5 h-5 rounded-full flex items-center justify-center\">\n                    <IoIosCheckmarkCircleOutline size={24} className={isDark ? \"text-[#48484A]\" : \"text-[#C9C9CA]\"} />\n                  </div>\n                  <span className={`text-sm font-semibold ${isDark ? 'text-[#636366]' : 'text-[#9A999E]'}`}>\n                    <span className={isDark ? 'text-[#636366]' : 'text-[#9A999E]'}>{data.completedCount}</span> of {data.totalCount}\n                  </span>\n                  <div className={`w-28 h-2 ${colors.progressTrack} rounded-full mx-1 transition-colors`}>\n                    <motion.div\n                      className=\"h-full bg-[#1EBF46] rounded-full relative overflow-hidden\"\n                      style={{ width: `${data.progress}%` }}\n                    >\n                      <motion.div\n                        initial={{ x: '-100%' }}\n                        animate={{ x: '100%' }}\n                        transition={{ repeat: Infinity, duration: 1.5, ease: \"linear\" }}\n                        className=\"absolute inset-0 w-full h-full\"\n                        style={{ background: 'linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent)' }}\n                      />\n                    </motion.div>\n                  </div>\n                  <span className={`text-sm font-semibold ${isDark ? 'text-[#D1D1D6]' : 'text-[#6F6E71]'}`}>{data.progress}%</span>\n                </div>\n\n                {/* Subtasks */}\n                <div className=\"relative ml-6 mb-8 flex flex-col gap-5\">\n                  <motion.div\n                    initial={{ scaleY: 0 }}\n                    animate={{ scaleY: 1 }}\n                    className={`absolute left-0 top-0 bottom-4 w-[1.7px] origin-top transition-colors ${colors.subtaskLine}`}\n                  />\n                  {data.subtasks.map((task, idx) => (\n                    <motion.div\n                      key={task.id}\n                      initial={{ opacity: 0, x: -10 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      transition={{ delay: 0.1 + (idx * 0.03) }}\n                      className=\"relative flex items-center pl-8\"\n                    >\n                      <div className={`absolute left-0 top-[-10px] w-5 h-[30px] border-l-[1.7px] border-b-[1.7px] rounded-bl-xl transition-colors ${isDark ? 'border-[#2C2C2E]' : 'border-[#D6D5DC]'}`} />\n                      <div className={`w-5 h-5 rounded-full flex items-center justify-center border-[1.7px] transition-colors ${task.completed ? (isDark ? 'bg-[#D1D1D6] border-[#D1D1D6]' : 'bg-[#525157] border-[#525157]') : colors.subtaskCheck}`}>\n                        {task.completed && <Check size={12} className={isDark ? \"text-black\" : \"text-white\"} strokeWidth={3} />}\n                      </div>\n                      <span className={`ml-3 text-base font-medium transition-colors ${task.completed ? (isDark ? 'text-[#636366]' : 'text-[#78777C]') : (isDark ? 'text-[#AEAEB2]' : 'text-[#8A8A8D]')}`}>\n                        {task.title}\n                      </span>\n                    </motion.div>\n                  ))}\n                </div>\n\n                {/* Priority & Status */}\n                <div className=\"space-y-4 mb-6\">\n                  {[\n                    { label: 'Priority', val: data.priority, icon: <HugeiconsIcon icon={Flag01Icon} size={22} color=\"#ADACB8\" fill='#ADACB8' strokeWidth={1.5} />, bg: isDark ? 'bg-[#451A1C]' : 'bg-[#FDD4D5]', text: isDark ? 'text-[#FF453A]' : 'text-[#d63644]' },\n                    { label: 'Status', val: data.status, icon: <BiSolidHourglassBottom color='#ADACB8' size={22} />, bg: isDark ? 'bg-[#3D2E12]' : 'bg-[#FDEAC5]', text: isDark ? 'text-[#FFD60A]' : 'text-[#715A30]' }\n                  ].map((item, i) => (\n                    <motion.div\n                      key={i}\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      transition={{ delay: 0.2 + (i * 0.05) }}\n                      className=\"flex gap-8 items-center font-medium px-1\"\n                    >\n                      <div className={`flex items-center gap-3 min-w-[100px] transition-colors ${isDark ? 'text-[#D1D1D6]' : 'text-[#565658]'}`}>{item.icon}{item.label}</div>\n                      <div className={`${item.bg} ${item.text} px-3 py-1 rounded-lg text-sm font-bold flex items-center gap-2 opacity-85 transition-colors`}>\n                        {item.val}\n                        <span className={`${isDark ? 'bg-[#1C1C1E]' : 'bg-[#FEF9EE]'} flex justify-center items-center rounded-sm p-px border-0.5 transition-colors`}>\n                          <ChevronDown size={16} color={isDark ? '#FFD60A' : '#58401A'} strokeWidth={2} />\n                        </span>\n                      </div>\n                    </motion.div>\n                  ))}\n                </div>\n\n                {/* Assignees */}\n                <div className=\"flex flex-wrap gap-2\">\n                  {data.assignees.map((user, i) => (\n                    <motion.div\n                      key={i}\n                      initial={{ opacity: 0, scale: 0.9 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      transition={{ delay: 0.3 + (i * 0.03) }}\n                      className={`flex items-center gap-2 pr-4 pl-1.5 py-1 rounded-full border-[1.58px] shadow-sm transition-colors ${isDark ? 'border-[#2C2C2E] bg-[#1C1C1E]' : 'border-[#E4E4EA]'} `}\n                    >\n                      <img title='avatar' src={user.avatar} className=\"w-7 h-7 rounded-full object-cover\" />\n                      <span className={`text-sm font-semibold transition-colors ${isDark ? 'text-[#D1D1D6]' : 'text-[#68686A]'}`}>{user.name}</span>\n                    </motion.div>\n                  ))}\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </motion.div>\n      </LayoutGroup>\n    </div>\n  );\n};",
      "type": "registry:ui",
      "target": "components/ui/task-widget.tsx"
    }
  ],
  "type": "registry:ui"
}