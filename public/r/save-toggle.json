{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "save-toggle",
  "dependencies": [
    "lucide-react",
    "motion"
  ],
  "files": [
    {
      "path": "src/components/ui/save-toggle.tsx",
      "content": "\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'motion/react';\nimport { BsCheckCircleFill } from 'react-icons/bs';\nimport { Sun, Moon } from 'lucide-react';\n\ntype ButtonStatus = 'idle' | 'loading' | 'success' | 'saved';\ntype Size = 'sm' | 'md' | 'lg';\ntype Theme = 'light' | 'dark';\n\nconst SIZE_CONFIG = {\n  sm: {\n    height: 52,\n    circleWidth: 52,\n    idleWidth: 108,\n    savedWidth: 128,\n    text: 'text-[18px]',\n    icon: 'text-2xl',\n    spinner: 'w-7 h-7',\n    gap: 'gap-2',\n    padding: 'px-4',\n  },\n  md: {\n    height: 56,\n    circleWidth: 56,\n    idleWidth: 120,\n    savedWidth: 140,\n    text: 'text-[20px]',\n    icon: 'text-3xl',\n    spinner: 'w-8 h-8',\n    gap: 'gap-3',\n    padding: 'px-5',\n  },\n  lg: {\n    height: 68,\n    circleWidth: 68,\n    idleWidth: 144,\n    savedWidth: 168,\n    text: 'text-[22px]',\n    icon: 'text-[28px]',\n    spinner: 'w-9 h-9',\n    gap: 'gap-4',\n    padding: 'px-5',\n  },\n};\n\ninterface SaveToggleProps {\n  size?: Size;\n  idleText?: string;\n  savedText?: string;\n  initialTheme?: Theme;\n  loadingDuration?: number;\n  successDuration?: number;\n  onStatusChange?: (status: ButtonStatus) => void;\n}\n\nexport const SaveToggle: React.FC<SaveToggleProps> = ({\n  size = 'md',\n  idleText = 'Save',\n  savedText = 'Saved',\n  initialTheme = 'light',\n  loadingDuration = 1000,\n  successDuration = 800,\n  onStatusChange,\n}) => {\n  const [status, setStatus] = useState<ButtonStatus>('idle');\n  const [isDark, setIsDark] = useState(initialTheme === 'dark');\n  const cfg = SIZE_CONFIG[size];\n\n  /* âœ… FIX: stable width for idle + saved */\n  const stableWidth = Math.max(cfg.idleWidth, cfg.savedWidth);\n\n  /* --- Theme Sync --- */\n  useEffect(() => {\n    if (isDark) document.documentElement.classList.add('dark');\n    else document.documentElement.classList.remove('dark');\n  }, [isDark]);\n\n  /* --- Status callback --- */\n  useEffect(() => {\n    onStatusChange?.(status);\n  }, [status, onStatusChange]);\n\n  const handleClick = () => {\n    if (status === 'idle') {\n      setStatus('loading');\n\n      setTimeout(() => {\n        setStatus('success');\n\n        setTimeout(() => {\n          setStatus('saved');\n        }, successDuration);\n      }, loadingDuration);\n    } else if (status === 'saved') {\n      setStatus('idle');\n    }\n  };\n\n  const isCircle = status === 'loading' || status === 'success';\n\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-white dark:bg-zinc-950 transition-colors duration-500 gap-8\">\n\n      {/* Theme Toggle */}\n      <button\n        onClick={() => setIsDark(!isDark)}\n        className=\"p-3 rounded-full bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 transition-all active:scale-90 shadow-sm\"\n      >\n        {isDark ? (\n          <Sun className=\"text-yellow-400\" size={20} />\n        ) : (\n          <Moon className=\"text-zinc-500\" size={20} />\n        )}\n      </button>\n\n      <motion.button\n        onClick={handleClick}\n        layout\n        initial={false}\n        animate={{\n          width: isCircle ? cfg.circleWidth : stableWidth,\n          height: cfg.height,\n          backgroundColor: isCircle\n            ? isDark ? '#18181B' : '#292725'\n            : status === 'saved'\n            ? isDark ? '#09090B' : '#ffffff'\n            : isDark ? '#27272A' : '#E8E7E0',\n          borderColor: status === 'saved'\n            ? isDark ? '#3F3F46' : '#E5E5E5'\n            : 'transparent',\n        }}\n        transition={{\n          type: 'spring',\n          stiffness: 500,\n          damping: 35,\n          mass: 1,\n        }}\n        style={{ borderWidth: status === 'saved' ? '2px' : '0px' }}\n        className=\"relative overflow-hidden rounded-full flex items-center justify-center focus:outline-none shadow-sm cursor-pointer select-none active:scale-[0.97] transition-transform w-full\"\n      >\n        <AnimatePresence mode=\"wait\">\n          {status === 'idle' && (\n            <motion.span\n              key=\"idle\"\n              initial={{ opacity: 0, y: 5 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -5 }}\n              transition={{ duration: 0.2 }}\n              className={`font-bold tracking-tight pointer-events-none ${cfg.text} text-[#2C2A26] dark:text-zinc-200`}\n            >\n              {idleText}\n            </motion.span>\n          )}\n\n          {status === 'loading' && (\n            <motion.div\n              key=\"loading\"\n              initial={{ opacity: 0, scale: 0.8 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.8 }}\n              className=\"relative flex items-center justify-center\"\n            >\n              <motion.svg\n                viewBox=\"0 0 26 26\"\n                className={cfg.spinner}\n                animate={{ rotate: 360 }}\n                transition={{ repeat: Infinity, duration: 0.7, ease: 'linear' }}\n              >\n                <circle\n                  cx=\"12\"\n                  cy=\"12\"\n                  r=\"10\"\n                  stroke={isDark ? '#52525B' : '#D0CCC6'}\n                  strokeWidth=\"3\"\n                  fill=\"none\"\n                />\n                <path\n                  d=\"M12 2 A10 10 0 0 1 22 12\"\n                  stroke=\"white\"\n                  strokeWidth=\"3\"\n                  strokeLinecap=\"round\"\n                  fill=\"none\"\n                />\n              </motion.svg>\n            </motion.div>\n          )}\n\n          {status === 'success' && (\n            <motion.div\n              key=\"success\"\n              initial={{ opacity: 0, scale: 0.5 }}\n              animate={{ opacity: 1, scale: 1.15 }}\n              exit={{ opacity: 0, scale: 0.5 }}\n              className=\"flex items-center justify-center\"\n            >\n              <BsCheckCircleFill\n                className={`${cfg.icon} text-[#D0CCC6] dark:text-zinc-400`}\n              />\n            </motion.div>\n          )}\n\n          {status === 'saved' && (\n            <motion.div\n              key=\"saved\"\n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{ opacity: 1, scale: 1 }}\n              className={`flex items-center justify-center ${cfg.gap} ${cfg.padding}`}\n            >\n              <div className=\"flex items-center justify-center shrink-0\">\n                <BsCheckCircleFill\n                  className={`${cfg.icon} text-[#585654] dark:text-zinc-300`}\n                />\n              </div>\n              <span\n                className={`font-bold tracking-tight whitespace-nowrap ${cfg.text} text-[#68686A] dark:text-zinc-400`}\n              >\n                {savedText}\n              </span>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.button>\n    </div>\n  );\n};\n",
      "type": "registry:ui",
      "target": "components/ui/save-toggle.tsx"
    }
  ],
  "type": "registry:ui"
}