{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "range-selection-slider",
  "dependencies": [
    "framer-motion",
    "lucide-react"
  ],
  "files": [
    {
      "path": "src/components/ui/range-selection-slider.tsx",
      "content": "\"use client\";\n\nimport { useState, useRef, useCallback, useEffect, type FC } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { Sun, Moon } from \"lucide-react\";\n\n/* --- Types --- */\ninterface DigitColumnProps {\n  digit: string;\n}\n\ninterface RollingNumberProps {\n  value: number;\n  prefix?: string;\n}\n\ninterface RangeSliderProps {\n  min: number;\n  max: number;\n  step?: number;\n  value: [number, number];\n  onChange: (value: [number, number]) => void;\n}\n\ninterface PriceRangeCardProps {\n  defaultRange?: [number, number];\n  min?: number;\n  max?: number;\n  step?: number;\n  prefix?: string;\n  showThemeToggle?: boolean;\n  onApply?: (range: [number, number]) => void;\n  onCancel?: (range: [number, number]) => void;\n}\n\ntype DragType = \"min\" | \"max\" | null;\n\n/* --- Utils --- */\nfunction cn(...classes: (string | boolean | undefined)[]) {\n  return classes.filter(Boolean).join(\" \");\n}\n\n/* --- Rolling Number Components --- */\nconst DigitColumn: FC<DigitColumnProps> = ({ digit }) => {\n  const digitHeight = 28;\n  const num = Number(digit);\n\n  if (Number.isNaN(num)) {\n    return (\n      <span className=\"inline-block w-[0.54em] text-center text-[#010103] dark:text-zinc-100 font-bold\">\n        {digit}\n      </span>\n    );\n  }\n\n  return (\n    <div\n      className=\"relative overflow-hidden\"\n      style={{ height: digitHeight, width: \"0.6em\" }}\n    >\n      <motion.div\n        initial={false}\n        animate={{ y: -num * digitHeight }}\n        transition={{ type: \"spring\", stiffness: 350, damping: 30 }}\n        className=\"absolute top-0 left-0 flex flex-col\"\n      >\n        {Array.from({ length: 10 }).map((_, i) => (\n          <div\n            key={i}\n            style={{ height: digitHeight }}\n            className=\"flex items-center justify-center font-bold text-[#010103] dark:text-white\"\n          >\n            {i}\n          </div>\n        ))}\n      </motion.div>\n    </div>\n  );\n};\n\nconst RollingNumber: FC<RollingNumberProps> = ({ value, prefix = \"\" }) => {\n  const chars = (prefix + value.toLocaleString()).split(\"\");\n\n  return (\n    <div className=\"flex items-center font-bold leading-none tabular-nums text-[#010103] dark:text-zinc-100\">\n      {chars.map((char, index) => (\n        <motion.span\n          key={index + char}\n          layout\n          initial={{ opacity: 0, y: 6 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.2 }}\n          className=\"inline-flex\"\n        >\n          <DigitColumn digit={char} />\n        </motion.span>\n      ))}\n    </div>\n  );\n};\n\n/* --- Range Slider --- */\nconst RangeSlider: FC<RangeSliderProps> = ({\n  min,\n  max,\n  step = 1,\n  value,\n  onChange,\n}) => {\n  const [dragging, setDragging] = useState<DragType>(null);\n  const trackRef = useRef<HTMLDivElement>(null);\n\n  const getPercent = useCallback(\n    (v: number) => ((v - min) / (max - min)) * 100,\n    [min, max]\n  );\n\n  const valueFromX = useCallback(\n    (x: number) => {\n      if (!trackRef.current) return min;\n      const rect = trackRef.current.getBoundingClientRect();\n      const p = Math.max(0, Math.min(1, (x - rect.left) / rect.width));\n      const raw = min + p * (max - min);\n      return Math.round(raw / step) * step;\n    },\n    [min, max, step]\n  );\n\n  const move = (e: React.PointerEvent) => {\n    if (!dragging) return;\n    const v = valueFromX(e.clientX);\n\n    if (dragging === \"min\") {\n      onChange([Math.min(v, value[1] - step), value[1]]);\n    } else {\n      onChange([value[0], Math.max(v, value[0] + step)]);\n    }\n  };\n\n  const stop = () => setDragging(null);\n\n  const minP = getPercent(value[0]);\n  const maxP = getPercent(value[1]);\n\n  return (\n    <div\n      className=\"relative w-full h-[48px] flex items-center touch-none\"\n      onPointerMove={move}\n      onPointerUp={stop}\n      onPointerLeave={stop}\n    >\n      <div\n        ref={trackRef}\n        className=\"absolute w-full h-2 bg-gray-200 dark:bg-zinc-800 rounded-full\"\n      >\n        <motion.div\n          className=\"absolute h-full bg-[#010103] dark:bg-zinc-100 rounded-full\"\n          animate={{ left: `${minP}%`, width: `${maxP - minP}%` }}\n        />\n      </div>\n\n      {([\"min\", \"max\"] as const).map((type) => {\n        const left = type === \"min\" ? minP : maxP;\n\n        return (\n          <motion.div\n            key={type}\n            className={cn(\n              \"absolute w-[32px] h-[32px] bg-[#FEFEFE] dark:bg-zinc-100 border-[7px] shadow-2xl border-[#010103] dark:border-zinc-300 rounded-full cursor-grab active:cursor-grabbing\",\n              dragging === type && \"scale-110 z-20\"\n            )}\n            style={{ left: `calc(${left}% - 16px)` }}\n            onPointerDown={() => setDragging(type)}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\n/* --- Main Component --- */\nexport const PriceRangeCard: FC<PriceRangeCardProps> = ({\n  defaultRange = [800, 2400],\n  min = 0,\n  max = 5000,\n  step = 20,\n  prefix = \"$\",\n  showThemeToggle = true,\n  onApply,\n  onCancel,\n}) => {\n  const [range, setRange] = useState<[number, number]>(defaultRange);\n  const [isDark, setIsDark] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (isDark) document.documentElement.classList.add(\"dark\");\n    else document.documentElement.classList.remove(\"dark\");\n  }, [isDark]);\n\n  return (\n    <div className=\"h-screen w-full flex flex-col justify-center items-center bg-white dark:bg-zinc-950 transition-colors duration-500\">\n      \n      {showThemeToggle && (\n        <button\n          onClick={() => setIsDark(!isDark)}\n          className=\"mb-8 p-3 rounded-full bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-sm active:scale-90 transition-all\"\n        >\n          {isDark ? <Sun className=\"text-yellow-400\" size={20} /> : <Moon className=\"text-zinc-500\" size={20} />}\n        </button>\n      )}\n\n      <div className=\"bg-[#FEFEFE] dark:bg-zinc-900 rounded-3xl w-[360px] flex flex-col gap-[18px] border border-[#F0F0F0] dark:border-zinc-800 shadow-lg overflow-hidden\">\n        <div className=\"border border-[#F0F0F0] dark:border-zinc-800 p-[18px] px-4 rounded-3xl shadow-xs\">\n          <h2 className=\"text-xl text-[#010103] dark:text-zinc-100 font-bold\">\n            Price Range\n          </h2>\n\n          <RangeSlider min={min} max={max} step={step} value={range} onChange={setRange} />\n\n          <div className=\"flex flex-col gap-4\">\n            {([\"From\", \"To\"] as const).map((label, i) => (\n              <div\n                key={label}\n                className=\"bg-[#F4F4FB] dark:bg-zinc-800/50 rounded-2xl p-4 transition-colors\"\n              >\n                <span className=\"text-xs text-[#76767D] dark:text-zinc-500 font-semibold uppercase\">\n                  {label}\n                </span>\n                <div className=\"text-2xl font-bold\">\n                  <RollingNumber value={range[i]} prefix={prefix} />\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"flex gap-4 mb-[18px] px-6\">\n          <button\n            className=\"flex-1 bg-[#000002] dark:bg-zinc-100 hover:bg-[#000002dd] dark:hover:bg-white text-[#FEFEFE] dark:text-zinc-950 py-2.5 rounded-3xl transition-all active:scale-95\"\n            onClick={() => onApply?.(range)}\n          >\n            Apply\n          </button>\n\n          <button\n            className=\"flex-1 border-[1.6px] border-[#E4E4E9] dark:border-zinc-700 hover:bg-gray-50 dark:hover:bg-zinc-800 text-[#69686F] dark:text-zinc-400 font-semibold py-2.5 rounded-3xl transition-all active:scale-95\"\n            onClick={() => {\n              setRange(defaultRange);\n              onCancel?.(defaultRange);\n            }}\n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n",
      "type": "registry:ui",
      "target": "components/ui/range-selection-slider.tsx"
    }
  ],
  "type": "registry:ui"
}